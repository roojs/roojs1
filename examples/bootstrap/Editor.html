<!DOCTYPE html>
<html>
  <head>
    <title>Bootstrap - Editor Example</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
        
    <link href="../../../bootswatch/AdminLTE-master/css/font-awesome.css" rel="stylesheet" type="text/css" /> 
    <link rel="stylesheet" href="../../css-bootstrap/select2.css">        
    <link rel="stylesheet" href="../../css-bootstrap/combobox.css">     
    <link rel="stylesheet" href="../../css-bootstrap/checkbox.css">
        
        
        
    <script type="text/javascript" src="../../roojs-core-debug.js"></script>
    <!-- bootstrap js.. needs to compile it later.. -->
    <script type="text/javascript" src="../../Roo/XComponent.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/Component.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/Body.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/Container.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/Column.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/Navbar.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/Menu.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/MenuItem.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/MenuSeparator.js"></script>
    
    <script type="text/javascript" src="../../Roo/bootstrap/NavSimplebar.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/NavGroup.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/NavItem.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/TabGroup.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/TabPanel.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/Row.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/Button.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/ButtonGroup.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/Img.js"></script>
    
    <script type="text/javascript" src="../../Roo/bootstrap/Header.js"></script>
    
    <script type="text/javascript" src="../../Roo/bootstrap/Modal.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/Form.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/Input.js"></script>
    
    <script type="text/javascript" src="../../Roo/bootstrap/TriggerField.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/ComboBox.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/ComboBox2.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/Calendar.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/Popover.js"></script>
    
    <script type="text/javascript" src="../../Roo/data/SortTypes.js"></script>
    <script type="text/javascript" src="../../Roo/data/Record.js"></script>
    <script type="text/javascript" src="../../Roo/data/Store.js"></script>
    <script type="text/javascript" src="../../Roo/data/SimpleStore.js"></script>
    <script type="text/javascript" src="../../Roo/data/JsonStore.js"></script>
    <script type="text/javascript" src="../../Roo/data/Field.js"></script>
    <script type="text/javascript" src="../../Roo/data/DataReader.js"></script>
    <script type="text/javascript" src="../../Roo/data/DataProxy.js"></script>
    <script type="text/javascript" src="../../Roo/data/MemoryProxy.js"></script>
    <script type="text/javascript" src="../../Roo/data/HttpProxy.js"></script>
    <script type="text/javascript" src="../../Roo/data/ScriptTagProxy.js"></script>
    <script type="text/javascript" src="../../Roo/data/JsonReader.js"></script>
    <script type="text/javascript" src="../../Roo/data/ArrayReader.js"></script>
    
    <script type="text/javascript" src="../../Roo/form/VTypes.js"></script>
    <script type="text/javascript" src="../../Roo/View.js"></script>
    
    <script type="text/javascript" src="../../../Campaign/editor/Panel.js"></script>
    <script type="text/javascript" src="../../../Campaign/editor/TextBlock.js"></script>
    <script type="text/javascript" src="../../../Campaign/editor/ImageBlock.js"></script>
    
    <link rel="stylesheet" href="../../../Campaign/editor/editor.css">
    
    <script type="text/javascript" src="../../Roo/bootstrap/TextArea.js"></script>
    <script type="text/javascript" src="../../Roo/HtmlEditorCore.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/HtmlEditor.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/htmleditor/ToolbarStandard.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/MenuMgr.js"></script>
    <script type="text/javascript" src="../../Roo/bootstrap/MessageBox.js"></script>

    <!-- test code -->
    <script type="text/javascript" src="Editor.js"></script>
  </head>
  
  <body id="body">
    <script type="text/javascript">
        var baseURL = '/web.campaign/index.local.php';
        var rootURL = '/web.campaign';
        
        Roo.XComponent.hideProgress = true;
        
        Roo.onReady(function() {
            Roo.XComponent.build();
        });
        
        Roo.XComponent.on('buildcomplete', function() {
            Roo.Ajax.request({
                url : baseURL + '/editor/data.php',
                method: 'GET',
                success : function(r)
                {
                    var res = Roo.decode(r.responseText);
                    
                    if(!res.success){
                        return;
                    }
                    
                    Roo.log(res);
                    
                    Roo.example.Editor.previewPanel.body().dom.innerHTML = res.data.email;
                    
                    Roo.each(Roo.example.Editor.previewPanel.body().select('.campaign-editable', true).elements, function(el){
                        Roo.log(el);
                        
                        var target = el.attr('data-target');
                        
                        Roo.log(target);
                        
                        Roo.example.Editor[target] = new Roo.bootstrap.editor.TextBlock({ panel : 'thanks-email' }).render(el);
                        
                    })
                    
                    Roo.each(Roo.example.Editor.previewPanel.body().select('.campaign-image-editable', true).elements, function(el){
                        Roo.log(el);
                        
                        var target = el.attr('data-target');
                        
                        Roo.log(target);
                        
                        Roo.example.Editor[target] = new Roo.bootstrap.editor.ImageBlock({ panel : 'thanks-email' }).render(el);
                        Roo.example.Editor[target]['parent'] = el;
                        
                    })
                    return;
                    for ( var p in res.data.campaign.emails ){
                        var f = res.data.campaign.emails[p];
                        
                        for (var d in f['message']){
                            Roo.example.Editor[d].setValue(f['message'][d])
                        }
                        
                        for (var d in f['image']){
                            
                            Roo.example.Editor[d].setValue(baseURL + '/Images/Thumb')
                            Roo.example.Editor[d].setValue(f['image'][d])
                        }
                        
                    }
                    
                }
            });
        });
        

        
    </script>
  </body>
</html>