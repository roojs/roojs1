<html><head><title>../roojs1/Roo/bootstrap/HtmlEditor.js</title><link rel="stylesheet" type="text/css" href="../../../css/highlight-js.css"/></head><body class="highlightpage"><code class="jsdoc-pretty"><span class="jsdoc-comment">/*
 * - LGPL
 *
 * HtmlEditor
 * 
 */

/**
 * @class Roo.bootstrap.HtmlEditor
 * @extends Roo.bootstrap.Component
 * Bootstrap HtmlEditor class

 * @constructor
 * Create a new HtmlEditor
 * @param {Object} config The config object
 */

</span><span class="jsdoc-var">Roo.bootstrap.HtmlEditor </span><span class="jsdoc-syntax">= </span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">config</span><span class="jsdoc-syntax">){
    </span><span class="jsdoc-var">Roo.bootstrap.HtmlEditor.superclass.constructor.call</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">this</span><span class="jsdoc-syntax">, </span><span class="jsdoc-var">config</span><span class="jsdoc-syntax">);
    
    </span><span class="jsdoc-var">this.addEvents</span><span class="jsdoc-syntax">({
        </span><span class="jsdoc-comment">/**
         * @event initialize
         * Fires when the editor is fully initialized (including the iframe)
         * @param {HtmlEditor} this
         */
        </span><span class="jsdoc-var">initialize</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">,
        </span><span class="jsdoc-comment">/**
         * @event activate
         * Fires when the editor is first receives the focus. Any insertion must wait
         * until after this event.
         * @param {HtmlEditor} this
         */
        </span><span class="jsdoc-var">activate</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">,
         </span><span class="jsdoc-comment">/**
         * @event beforesync
         * Fires before the textarea is updated with content from the editor iframe. Return false
         * to cancel the sync.
         * @param {HtmlEditor} this
         * @param {String} html
         */
        </span><span class="jsdoc-var">beforesync</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">,
         </span><span class="jsdoc-comment">/**
         * @event beforepush
         * Fires before the iframe editor is updated with content from the textarea. Return false
         * to cancel the push.
         * @param {HtmlEditor} this
         * @param {String} html
         */
        </span><span class="jsdoc-var">beforepush</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">,
         </span><span class="jsdoc-comment">/**
         * @event sync
         * Fires when the textarea is updated with content from the editor iframe.
         * @param {HtmlEditor} this
         * @param {String} html
         */
        </span><span class="jsdoc-var">sync</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">,
         </span><span class="jsdoc-comment">/**
         * @event push
         * Fires when the iframe editor is updated with content from the textarea.
         * @param {HtmlEditor} this
         * @param {String} html
         */
        </span><span class="jsdoc-var">push</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">,
         </span><span class="jsdoc-comment">/**
         * @event editmodechange
         * Fires when the editor switches edit modes
         * @param {HtmlEditor} this
         * @param {Boolean} sourceEdit True if source edit, false if standard editing.
         */
        </span><span class="jsdoc-var">editmodechange</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">,
        </span><span class="jsdoc-comment">/**
         * @event editorevent
         * Fires when on any editor (mouse up/down cursor movement etc.) - used for toolbar hooks.
         * @param {HtmlEditor} this
         */
        </span><span class="jsdoc-var">editorevent</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">true
    </span><span class="jsdoc-syntax">});
   
};


</span><span class="jsdoc-var">Roo.extend</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">Roo.bootstrap.HtmlEditor</span><span class="jsdoc-syntax">, </span><span class="jsdoc-var">Roo.bootstrap.Component</span><span class="jsdoc-syntax">,  {
      </span><span class="jsdoc-comment">/**
     * @cfg {Array} toolbars Array of toolbars. - defaults to just the Standard one
     */
    </span><span class="jsdoc-var">toolbars </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">,
    </span><span class="jsdoc-comment">/**
     * @cfg {String} createLinkText The default text for the create link prompt
     */
    </span><span class="jsdoc-var">createLinkText </span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Please enter the URL for the link:'</span><span class="jsdoc-syntax">,
    </span><span class="jsdoc-comment">/**
     * @cfg {String} defaultLinkValue The default value for the create link prompt (defaults to http:/ /)
     */
    </span><span class="jsdoc-var">defaultLinkValue </span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'http:/'</span><span class="jsdoc-syntax">+</span><span class="jsdoc-string">'/'</span><span class="jsdoc-syntax">,
   
     </span><span class="jsdoc-comment">/**
     * @cfg {String} resizable  's' or 'se' or 'e' - wrapps the element in a
     *                        Roo.resizable.
     */
    </span><span class="jsdoc-var">resizable </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">,
     </span><span class="jsdoc-comment">/**
     * @cfg {Number} height (in pixels)
     */   
    </span><span class="jsdoc-var">height</span><span class="jsdoc-syntax">: 300,
   </span><span class="jsdoc-comment">/**
     * @cfg {Number} width (in pixels)
     */   
    </span><span class="jsdoc-var">width</span><span class="jsdoc-syntax">: 500,
    
    </span><span class="jsdoc-comment">/**
     * @cfg {Array} stylesheets url of stylesheets. set to [] to disable stylesheets.
     * 
     */
    </span><span class="jsdoc-var">stylesheets</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">,
    
    </span><span class="jsdoc-comment">// id of frame..
    </span><span class="jsdoc-var">frameId</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">,
    
    </span><span class="jsdoc-comment">// private properties
    </span><span class="jsdoc-var">validationEvent </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">,
    </span><span class="jsdoc-var">deferHeight</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">,
    </span><span class="jsdoc-var">initialized </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">,
    </span><span class="jsdoc-var">activated </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">,
    </span><span class="jsdoc-var">sourceEditMode </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">,
    </span><span class="jsdoc-var">onFocus </span><span class="jsdoc-syntax">: </span><span class="jsdoc-var">Roo.emptyFn</span><span class="jsdoc-syntax">,
    </span><span class="jsdoc-var">iframePad</span><span class="jsdoc-syntax">:3,
    </span><span class="jsdoc-var">hideMode</span><span class="jsdoc-syntax">:</span><span class="jsdoc-string">'offsets'</span><span class="jsdoc-syntax">,
    
    </span><span class="jsdoc-var">inputEl</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">function </span><span class="jsdoc-syntax">()
    {
        </span><span class="jsdoc-keyword">return </span><span class="jsdoc-var">this.el.select</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'textarea.form-control'</span><span class="jsdoc-syntax">,</span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">)</span><span class="jsdoc-var">.first</span><span class="jsdoc-syntax">();
    },
    
    </span><span class="jsdoc-var">getAutoCreate </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">()
    {
        </span><span class="jsdoc-keyword">var </span><span class="jsdoc-var">cfg </span><span class="jsdoc-syntax">= {
            </span><span class="jsdoc-var">tag</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">&quot;textarea&quot;</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">cls</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">&quot;form-control&quot;</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">style</span><span class="jsdoc-syntax">:</span><span class="jsdoc-string">'width: ' </span><span class="jsdoc-syntax">+ </span><span class="jsdoc-var">this.width </span><span class="jsdoc-syntax">+ </span><span class="jsdoc-string">'px;height: ' </span><span class="jsdoc-syntax">+ </span><span class="jsdoc-var">this.height </span><span class="jsdoc-syntax">+ </span><span class="jsdoc-string">'px;'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">autocomplete</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">&quot;off&quot;
        </span><span class="jsdoc-syntax">}
        
        </span><span class="jsdoc-keyword">return </span><span class="jsdoc-var">cfg</span><span class="jsdoc-syntax">;
        
    }
</span><span class="jsdoc-comment">//
//    /**
//     * Protected method that will not generally be called directly. It
//     * is called when the editor creates its toolbar. Override this method if you need to
//     * add custom toolbar buttons.
//     * @param {Roo.bootstrap.HtmlEditor} editor
//     */
//    createToolbar : function(editor){
//        if (!editor.toolbars || !editor.toolbars.length) {
//            editor.toolbars = [ new Roo.bootstrap.HtmlEditor.ToolbarStandard() ]; // can be empty?
//        }
//        
//        for (var i =0 ; i &lt; editor.toolbars.length;i++) {
//            editor.toolbars[i] = Roo.factory(
//                    typeof(editor.toolbars[i]) == 'string' ?
//                        { xtype: editor.toolbars[i]} : editor.toolbars[i],
//                Roo.bootstrap.HtmlEditor);
//            editor.toolbars[i].init(editor);
//        }
//         
//        
//    },
//
//    /**
//     * Protected method that will not generally be called directly. It
//     * is called when the editor initializes the iframe with HTML contents. Override this method if you
//     * want to change the initialization markup of the iframe (e.g. to add stylesheets).
//     */
//    getDocMarkup : function(){
//        // body styles..
//        var st = '';
//        if (this.stylesheets === false) {
//            
//            Roo.get(document.head).select('style').each(function(node) {
//                st += node.dom.outerHTML || new XMLSerializer().serializeToString(node.dom);
//            });
//            
//            Roo.get(document.head).select('link').each(function(node) { 
//                st += node.dom.outerHTML || new XMLSerializer().serializeToString(node.dom);
//            });
//            
//        } else if (!this.stylesheets.length) {
//                // simple..
//                st = '&lt;style type=&quot;text/css&quot;&gt;' +
//                    'body{border:0;margin:0;padding:3px;height:98%;cursor:text;}' +
//                   '&lt;/style&gt;';
//        } else {
//            Roo.each(this.stylesheets, function(s) {
//                st += '&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;' + s +'&quot; /&gt;'
//            });
//            
//        }
//        
//        st +=  '&lt;style type=&quot;text/css&quot;&gt;' +
//            'IMG { cursor: pointer } ' +
//        '&lt;/style&gt;';
//
//        
//        return '&lt;html&gt;&lt;head&gt;' + st  +
//            //&lt;style type=&quot;text/css&quot;&gt;' +
//            //'body{border:0;margin:0;padding:3px;height:98%;cursor:text;}' +
//            //'&lt;/style&gt;' +
//            ' &lt;/head&gt;&lt;body class=&quot;roo-htmleditor-body&quot;&gt;&lt;/body&gt;&lt;/html&gt;';
//    },
//
//    // private
//    onRender : function(ct, position)
//    {
//        var _t = this;
//        Roo.bootstrap.HtmlEditor.superclass.onRender.call(this, ct, position);
//        this.inputEl().dom.style.border = '0 none';
//        this.inputEl().dom.setAttribute('tabIndex', -1);
//        this.inputEl().addClass('x-hidden');
//        if(Roo.isIE){ // fix IE 1px bogus margin
//            this.inputEl().applyStyles('margin-top:-1px;margin-bottom:-1px;')
//        }
//        this.wrap = this.inputEl().wrap({
//            cls:'x-html-editor-wrap', cn:{cls:'x-html-editor-tb'}
//        });
//        
//        if (this.resizable) {
//            this.resizeEl = new Roo.Resizable(this.wrap, {
//                pinned : true,
//                wrap: true,
//                dynamic : true,
//                minHeight : this.height,
//                height: this.height,
//                handles : this.resizable,
//                width: this.width,
//                listeners : {
//                    resize : function(r, w, h) {
//                        _t.onResize(w,h); // -something
//                    }
//                }
//            });
//            
//        }
//
//        this.frameId = Roo.id();
//        
//        this.createToolbar(this);
//        
//      
//        
//        var iframe = this.wrap.createChild({
//            tag: 'iframe',
//            id: this.frameId,
//            name: this.frameId,
//            frameBorder : 'no',
//            'src' : Roo.SSL_SECURE_URL ? Roo.SSL_SECURE_URL  :  &quot;javascript:false&quot;
//        }, this.inputEl()
//        );
//        
//       // console.log(iframe);
//        //this.wrap.dom.appendChild(iframe);
//
//        this.iframe = iframe.dom;
//
//         this.assignDocWin();
//        
//        this.doc.designMode = 'on';
//       
//        this.doc.open();
//        this.doc.write(this.getDocMarkup());
//        this.doc.close();
//
//        
//        var task = { // must defer to wait for browser to be ready
//            run : function(){
//                //console.log(&quot;run task?&quot; + this.doc.readyState);
//                this.assignDocWin();
//                if(this.doc.body || this.doc.readyState == 'complete'){
//                    try {
//                        this.doc.designMode=&quot;on&quot;;
//                    } catch (e) {
//                        return;
//                    }
//                    Roo.TaskMgr.stop(task);
//                    this.initEditor.defer(10, this);
//                }
//            },
//            interval : 10,
//            duration:10000,
//            scope: this
//        };
//        Roo.TaskMgr.start(task);
//
//        if(!this.width){
//            this.setSize(this.wrap.getSize());
//        }
//        if (this.resizeEl) {
//            this.resizeEl.resizeTo.defer(100, this.resizeEl,[ this.width,this.height ] );
//            // should trigger onReize..
//        }
//    },
//
//    // private
//    onResize : function(w, h)
//    {
//        //Roo.log('resize: ' +w + ',' + h );
//        Roo.inputEl().HtmlEditor.superclass.onResize.apply(this, arguments);
//        if(this.inputEl() &amp;&amp; this.iframe){
//            if(typeof w == 'number'){
//                var aw = w - this.wrap.getFrameWidth('lr');
//                this.inputEl().setWidth(this.adjustWidth('textarea', aw));
//                this.iframe.style.width = aw + 'px';
//            }
//            if(typeof h == 'number'){
//                var tbh = 0;
//                for (var i =0; i &lt; this.toolbars.length;i++) {
//                    // fixme - ask toolbars for heights?
//                    tbh += this.toolbars[i].tb.el.getHeight();
//                    if (this.toolbars[i].footer) {
//                        tbh += this.toolbars[i].footer.el.getHeight();
//                    }
//                }
//                
//                
//                
//                
//                var ah = h - this.wrap.getFrameWidth('tb') - tbh;// this.tb.el.getHeight();
//                ah -= 5; // knock a few pixes off for look..
//                this.inputEl().setHeight(this.adjustWidth('textarea', ah));
//                this.iframe.style.height = ah + 'px';
//                if(this.doc){
//                    (this.doc.body || this.doc.documentElement).style.height = (ah - (this.iframePad*2)) + 'px';
//                }
//            }
//        }
//    },
//
//    /**
//     * Toggles the editor between standard and source edit mode.
//     * @param {Boolean} sourceEdit (optional) True for source edit, false for standard
//     */
//    toggleSourceEdit : function(sourceEditMode){
//        
//        this.sourceEditMode = sourceEditMode === true;
//        
//        if(this.sourceEditMode){
////            Roo.log('in');
////            Roo.log(this.syncValue());
//            this.syncValue();
//            this.iframe.className = 'x-hidden';
//            this.inputEl().removeClass('x-hidden');
//            this.inputEl().dom.removeAttribute('tabIndex');
//            this.inputEl().focus();
//        }else{
////            Roo.log('out')
////            Roo.log(this.pushValue()); 
//            this.pushValue();
//            this.iframe.className = '';
//            this.inputEl().addClass('x-hidden');
//            this.inputEl().dom.setAttribute('tabIndex', -1);
//            this.deferFocus();
//        }
//        this.setSize(this.wrap.getSize());
//        this.fireEvent('editmodechange', this, this.sourceEditMode);
//    },
//
//    // private used internally
//    createLink : function(){
//        var url = prompt(this.createLinkText, this.defaultLinkValue);
//        if(url &amp;&amp; url != 'http:/'+'/'){
//            this.relayCmd('createlink', url);
//        }
//    },
//
//    // private (for BoxComponent)
//    adjustSize : Roo.BoxComponent.prototype.adjustSize,
//
//    // private (for BoxComponent)
//    getResizeEl : function(){
//        return this.wrap;
//    },
//
//    // private (for BoxComponent)
//    getPositionEl : function(){
//        return this.wrap;
//    },
//
//    // private
//    initEvents : function(){
//        this.originalValue = this.getValue();
//    },
//
//    /**
//     * Overridden and disabled. The editor element does not support standard valid/invalid marking. @hide
//     * @method
//     */
//    markInvalid : Roo.emptyFn,
//    /**
//     * Overridden and disabled. The editor element does not support standard valid/invalid marking. @hide
//     * @method
//     */
//    clearInvalid : Roo.emptyFn,
//
//    setValue : function(v){
//        Roo.bootstrap.HtmlEditor.superclass.setValue.call(this, v);
//        this.pushValue();
//    },
//
//    /**
//     * Protected method that will not generally be called directly. If you need/want
//     * custom HTML cleanup, this is the method you should override.
//     * @param {String} html The HTML to be cleaned
//     * return {String} The cleaned HTML
//     */
//    cleanHtml : function(html){
//        html = String(html);
//        if(html.length &gt; 5){
//            if(Roo.isSafari){ // strip safari nonsense
//                html = html.replace(/\sclass=&quot;(?:Apple-style-span|khtml-block-placeholder)&quot;/gi, '');
//            }
//        }
//        if(html == '&amp;nbsp;'){
//            html = '';
//        }
//        return html;
//    },
//
//    /**
//     * Protected method that will not generally be called directly. Syncs the contents
//     * of the editor iframe with the textarea.
//     */
//    syncValue : function(){
//        if(this.initialized){
//            var bd = (this.doc.body || this.doc.documentElement);
//            //this.cleanUpPaste(); -- this is done else where and causes havoc..
//            var html = bd.innerHTML;
//            if(Roo.isSafari){
//                var bs = bd.getAttribute('style'); // Safari puts text-align styles on the body element!
//                var m = bs.match(/text-align:(.*?);/i);
//                if(m &amp;&amp; m[1]){
//                    html = '&lt;div style=&quot;'+m[0]+'&quot;&gt;' + html + '&lt;/div&gt;';
//                }
//            }
//            html = this.cleanHtml(html);
//            // fix up the special chars.. normaly like back quotes in word...
//            // however we do not want to do this with chinese..
//            html = html.replace(/([\x80-\uffff])/g, function (a, b) {
//                var cc = b.charCodeAt();
//                if (
//                    (cc &gt;= 0x4E00 &amp;&amp; cc &lt; 0xA000 ) ||
//                    (cc &gt;= 0x3400 &amp;&amp; cc &lt; 0x4E00 ) ||
//                    (cc &gt;= 0xf900 &amp;&amp; cc &lt; 0xfb00 )
//                ) {
//                        return b;
//                }
//                return &quot;&amp;#&quot;+cc+&quot;;&quot; 
//            });
//            if(this.fireEvent('beforesync', this, html) !== false){
//                this.inputEl().dom.value = html;
//                this.fireEvent('sync', this, html);
//            }
//        }
//    },
//
//    /**
//     * Protected method that will not generally be called directly. Pushes the value of the textarea
//     * into the iframe editor.
//     */
//    pushValue : function(){
//        if(this.initialized){
//            var v = this.inputEl().dom.value;
//            
//            if(v.length &lt; 1){
//                v = '&amp;#160;';
//            }
//            
//            if(this.fireEvent('beforepush', this, v) !== false){
//                var d = (this.doc.body || this.doc.documentElement);
//                d.innerHTML = v;
//                this.cleanUpPaste();
//                this.inputEl().dom.value = d.innerHTML;
//                this.fireEvent('push', this, v);
//            }
//        }
//    },
//
//    // private
//    deferFocus : function(){
//        this.focus.defer(10, this);
//    },
//
//    // doc'ed in Field
//    focus : function(){
//        if(this.win &amp;&amp; !this.sourceEditMode){
//            this.win.focus();
//        }else{
//            this.inputEl().focus();
//        }
//    },
//    
//    assignDocWin: function()
//    {
//        var iframe = this.iframe;
//        
//         if(Roo.isIE){
//            this.doc = iframe.contentWindow.document;
//            this.win = iframe.contentWindow;
//        } else {
//            if (!Roo.get(this.frameId)) {
//                return;
//            }
//            this.doc = (iframe.contentDocument || Roo.get(this.frameId).dom.document);
//            this.win = Roo.get(this.frameId).dom.contentWindow;
//        }
//    },
//    
//    // private
//    initEditor : function(){
//        //console.log(&quot;INIT EDITOR&quot;);
//        this.assignDocWin();
//        
//        
//        
//        this.doc.designMode=&quot;on&quot;;
//        this.doc.open();
//        this.doc.write(this.getDocMarkup());
//        this.doc.close();
//        
//        var dbody = (this.doc.body || this.doc.documentElement);
//        //var ss = this.el.getStyles('font-size', 'font-family', 'background-image', 'background-repeat');
//        // this copies styles from the containing element into thsi one..
//        // not sure why we need all of this..
//        var ss = this.inputEl().getStyles('font-size', 'background-image', 'background-repeat');
//        ss['background-attachment'] = 'fixed'; // w3c
//        dbody.bgProperties = 'fixed'; // ie
//        Roo.DomHelper.applyStyles(dbody, ss);
//        Roo.EventManager.on(this.doc, {
//            //'mousedown': this.onEditorEvent,
//            'mouseup': this.onEditorEvent,
//            'dblclick': this.onEditorEvent,
//            'click': this.onEditorEvent,
//            'keyup': this.onEditorEvent,
//            buffer:100,
//            scope: this
//        });
//        if(Roo.isGecko){
//            Roo.EventManager.on(this.doc, 'keypress', this.mozKeyPress, this);
//        }
//        if(Roo.isIE || Roo.isSafari || Roo.isOpera){
//            Roo.EventManager.on(this.doc, 'keydown', this.fixKeys, this);
//        }
//        this.initialized = true;
//
//        this.fireEvent('initialize', this);
//        this.pushValue();
//    },
//
//    // private
//    onDestroy : function(){
//        
//        
//        
//        if(this.rendered){
//            
//            for (var i =0; i &lt; this.toolbars.length;i++) {
//                // fixme - ask toolbars for heights?
//                this.toolbars[i].onDestroy();
//            }
//            
//            this.wrap.dom.innerHTML = '';
//            this.wrap.remove();
//        }
//    },
//
//    // private
//    onFirstFocus : function(){
//        
//        this.assignDocWin();
//        
//        
//        this.activated = true;
//        for (var i =0; i &lt; this.toolbars.length;i++) {
//            this.toolbars[i].onFirstFocus();
//        }
//       
//        if(Roo.isGecko){ // prevent silly gecko errors
//            this.win.focus();
//            var s = this.win.getSelection();
//            if(!s.focusNode || s.focusNode.nodeType != 3){
//                var r = s.getRangeAt(0);
//                r.selectNodeContents((this.doc.body || this.doc.documentElement));
//                r.collapse(true);
//                this.deferFocus();
//            }
//            try{
//                this.execCmd('useCSS', true);
//                this.execCmd('styleWithCSS', false);
//            }catch(e){}
//        }
//        this.fireEvent('activate', this);
//    },
//
//    // private
//    adjustFont: function(btn){
//        var adjust = btn.cmd == 'increasefontsize' ? 1 : -1;
//        //if(Roo.isSafari){ // safari
//        //    adjust *= 2;
//       // }
//        var v = parseInt(this.doc.queryCommandValue('FontSize')|| 3, 10);
//        if(Roo.isSafari){ // safari
//            var sm = { 10 : 1, 13: 2, 16:3, 18:4, 24: 5, 32:6, 48: 7 };
//            v =  (v &lt; 10) ? 10 : v;
//            v =  (v &gt; 48) ? 48 : v;
//            v = typeof(sm[v]) == 'undefined' ? 1 : sm[v];
//            
//        }
//        
//        
//        v = Math.max(1, v+adjust);
//        
//        this.execCmd('FontSize', v  );
//    },
//
//    onEditorEvent : function(e){
//        this.fireEvent('editorevent', this, e);
//      //  this.updateToolbar();
//        this.syncValue(); //we can not sync so often.. sync cleans, so this breaks stuff
//    },
//
//    insertTag : function(tg)
//    {
//        // could be a bit smarter... -&gt; wrap the current selected tRoo..
//        if (tg.toLowerCase() == 'span' || tg.toLowerCase() == 'code') {
//            
//            range = this.createRange(this.getSelection());
//            var wrappingNode = this.doc.createElement(tg.toLowerCase());
//            wrappingNode.appendChild(range.extractContents());
//            range.insertNode(wrappingNode);
//
//            return;
//            
//            
//            
//        }
//        this.execCmd(&quot;formatblock&quot;,   tg);
//        
//    },
//    
//    insertText : function(txt)
//    {
//        
//        
//        var range = this.createRange();
//        range.deleteContents();
//               //alert(Sender.getAttribute('label'));
//               
//        range.insertNode(this.doc.createTextNode(txt));
//    } ,
//    
//    // private
//    relayBtnCmd : function(btn){
//        this.relayCmd(btn.cmd);
//    },
//
//    /**
//     * Executes a Midas editor command on the editor document and performs necessary focus and
//     * toolbar updates. &lt;b&gt;This should only be called after the editor is initialized.&lt;/b&gt;
//     * @param {String} cmd The Midas command
//     * @param {String/Boolean} value (optional) The value to pass to the command (defaults to null)
//     */
//    relayCmd : function(cmd, value){
//        this.win.focus();
//        this.execCmd(cmd, value);
//        this.fireEvent('editorevent', this);
//        //this.updateToolbar();
//        this.deferFocus();
//    },
//
//    /**
//     * Executes a Midas editor command directly on the editor document.
//     * For visual commands, you should use {@link #relayCmd} instead.
//     * &lt;b&gt;This should only be called after the editor is initialized.&lt;/b&gt;
//     * @param {String} cmd The Midas command
//     * @param {String/Boolean} value (optional) The value to pass to the command (defaults to null)
//     */
//    execCmd : function(cmd, value){
//        this.doc.execCommand(cmd, false, value === undefined ? null : value);
//        this.syncValue();
//    },
// 
// 
//   
//    /**
//     * Inserts the passed text at the current cursor position. Note: the editor must be initialized and activated
//     * to insert tRoo.
//     * @param {String} text | dom node.. 
//     */
//    insertAtCursor : function(text)
//    {
//        
//        
//        
//        if(!this.activated){
//            return;
//        }
//        /*
//        if(Roo.isIE){
//            this.win.focus();
//            var r = this.doc.selection.createRange();
//            if(r){
//                r.collapse(true);
//                r.pasteHTML(text);
//                this.syncValue();
//                this.deferFocus();
//            
//            }
//            return;
//        }
//        */
//        if(Roo.isGecko || Roo.isOpera || Roo.isSafari){
//            this.win.focus();
//            
//            
//            // from jquery ui (MIT licenced)
//            var range, node;
//            var win = this.win;
//            
//            if (win.getSelection &amp;&amp; win.getSelection().getRangeAt) {
//                range = win.getSelection().getRangeAt(0);
//                node = typeof(text) == 'string' ? range.createContextualFragment(text) : text;
//                range.insertNode(node);
//            } else if (win.document.selection &amp;&amp; win.document.selection.createRange) {
//                // no firefox support
//                var txt = typeof(text) == 'string' ? text : text.outerHTML;
//                win.document.selection.createRange().pasteHTML(txt);
//            } else {
//                // no firefox support
//                var txt = typeof(text) == 'string' ? text : text.outerHTML;
//                this.execCmd('InsertHTML', txt);
//            } 
//            
//            this.syncValue();
//            
//            this.deferFocus();
//        }
//    },
// // private
//    mozKeyPress : function(e){
//        if(e.ctrlKey){
//            var c = e.getCharCode(), cmd;
//          
//            if(c &gt; 0){
//                c = String.fromCharCode(c).toLowerCase();
//                switch(c){
//                    case 'b':
//                        cmd = 'bold';
//                        break;
//                    case 'i':
//                        cmd = 'italic';
//                        break;
//                    
//                    case 'u':
//                        cmd = 'underline';
//                        break;
//                    
//                    case 'v':
//                        this.cleanUpPaste.defer(100, this);
//                        return;
//                        
//                }
//                if(cmd){
//                    this.win.focus();
//                    this.execCmd(cmd);
//                    this.deferFocus();
//                    e.preventDefault();
//                }
//                
//            }
//        }
//    },
//
//    // private
//    fixKeys : function(){ // load time branching for fastest keydown performance
//        if(Roo.isIE){
//            return function(e){
//                var k = e.getKey(), r;
//                if(k == e.TAB){
//                    e.stopEvent();
//                    r = this.doc.selection.createRange();
//                    if(r){
//                        r.collapse(true);
//                        r.pasteHTML('&amp;#160;&amp;#160;&amp;#160;&amp;#160;');
//                        this.deferFocus();
//                    }
//                    return;
//                }
//                
//                if(k == e.ENTER){
//                    r = this.doc.selection.createRange();
//                    if(r){
//                        var target = r.parentElement();
//                        if(!target || target.tagName.toLowerCase() != 'li'){
//                            e.stopEvent();
//                            r.pasteHTML('&lt;br /&gt;');
//                            r.collapse(false);
//                            r.select();
//                        }
//                    }
//                }
//                if (String.fromCharCode(k).toLowerCase() == 'v') { // paste
//                    this.cleanUpPaste.defer(100, this);
//                    return;
//                }
//                
//                
//            };
//        }else if(Roo.isOpera){
//            return function(e){
//                var k = e.getKey();
//                if(k == e.TAB){
//                    e.stopEvent();
//                    this.win.focus();
//                    this.execCmd('InsertHTML','&amp;#160;&amp;#160;&amp;#160;&amp;#160;');
//                    this.deferFocus();
//                }
//                if (String.fromCharCode(k).toLowerCase() == 'v') { // paste
//                    this.cleanUpPaste.defer(100, this);
//                    return;
//                }
//                
//            };
//        }else if(Roo.isSafari){
//            return function(e){
//                var k = e.getKey();
//                
//                if(k == e.TAB){
//                    e.stopEvent();
//                    this.execCmd('InsertText','\t');
//                    this.deferFocus();
//                    return;
//                }
//               if (String.fromCharCode(k).toLowerCase() == 'v') { // paste
//                    this.cleanUpPaste.defer(100, this);
//                    return;
//                }
//                
//             };
//        }
//    }(),
//    
//    getAllAncestors: function()
//    {
//        var p = this.getSelectedNode();
//        var a = [];
//        if (!p) {
//            a.push(p); // push blank onto stack..
//            p = this.getParentElement();
//        }
//        
//        
//        while (p &amp;&amp; (p.nodeType == 1) &amp;&amp; (p.tagName.toLowerCase() != 'body')) {
//            a.push(p);
//            p = p.parentNode;
//        }
//        a.push(this.doc.body);
//        return a;
//    },
//    lastSel : false,
//    lastSelNode : false,
//    
//    
//    getSelection : function() 
//    {
//        this.assignDocWin();
//        return Roo.isIE ? this.doc.selection : this.win.getSelection();
//    },
//    
//    getSelectedNode: function() 
//    {
//        // this may only work on Gecko!!!
//        
//        // should we cache this!!!!
//        
//        
//        
//         
//        var range = this.createRange(this.getSelection()).cloneRange();
//        
//        if (Roo.isIE) {
//            var parent = range.parentElement();
//            while (true) {
//                var testRange = range.duplicate();
//                testRange.moveToElementText(parent);
//                if (testRange.inRange(range)) {
//                    break;
//                }
//                if ((parent.nodeType != 1) || (parent.tagName.toLowerCase() == 'body')) {
//                    break;
//                }
//                parent = parent.parentElement;
//            }
//            return parent;
//        }
//        
//        // is ancestor a text element.
//        var ac =  range.commonAncestorContainer;
//        if (ac.nodeType == 3) {
//            ac = ac.parentNode;
//        }
//        
//        var ar = ac.childNodes;
//         
//        var nodes = [];
//        var other_nodes = [];
//        var has_other_nodes = false;
//        for (var i=0;i&lt;ar.length;i++) {
//            if ((ar[i].nodeType == 3) &amp;&amp; (!ar[i].data.length)) { // empty text ? 
//                continue;
//            }
//            // fullly contained node.
//            
//            if (this.rangeIntersectsNode(range,ar[i]) &amp;&amp; this.rangeCompareNode(range,ar[i]) == 3) {
//                nodes.push(ar[i]);
//                continue;
//            }
//            
//            // probably selected..
//            if ((ar[i].nodeType == 1) &amp;&amp; this.rangeIntersectsNode(range,ar[i]) &amp;&amp; (this.rangeCompareNode(range,ar[i]) &gt; 0)) {
//                other_nodes.push(ar[i]);
//                continue;
//            }
//            // outer..
//            if (!this.rangeIntersectsNode(range,ar[i])|| (this.rangeCompareNode(range,ar[i]) == 0))  {
//                continue;
//            }
//            
//            
//            has_other_nodes = true;
//        }
//        if (!nodes.length &amp;&amp; other_nodes.length) {
//            nodes= other_nodes;
//        }
//        if (has_other_nodes || !nodes.length || (nodes.length &gt; 1)) {
//            return false;
//        }
//        
//        return nodes[0];
//    },
//    createRange: function(sel)
//    {
//        // this has strange effects when using with 
//        // top toolbar - not sure if it's a great idea.
//        //this.editor.contentWindow.focus();
//        if (typeof sel != &quot;undefined&quot;) {
//            try {
//                return sel.getRangeAt ? sel.getRangeAt(0) : sel.createRange();
//            } catch(e) {
//                return this.doc.createRange();
//            }
//        } else {
//            return this.doc.createRange();
//        }
//    },
//    getParentElement: function()
//    {
//        
//        this.assignDocWin();
//        var sel = Roo.isIE ? this.doc.selection : this.win.getSelection();
//        
//        var range = this.createRange(sel);
//         
//        try {
//            var p = range.commonAncestorContainer;
//            while (p.nodeType == 3) { // text node
//                p = p.parentNode;
//            }
//            return p;
//        } catch (e) {
//            return null;
//        }
//    
//    },
//    /***
//     *
//     * Range intersection.. the hard stuff...
//     *  '-1' = before
//     *  '0' = hits..
//     *  '1' = after.
//     *         [ -- selected range --- ]
//     *   [fail]                        [fail]
//     *
//     *    basically..
//     *      if end is before start or  hits it. fail.
//     *      if start is after end or hits it fail.
//     *
//     *   if either hits (but other is outside. - then it's not 
//     *   
//     *    
//     **/
//    
//    
//    // @see http://www.thismuchiknow.co.uk/?p=64.
//    rangeIntersectsNode : function(range, node)
//    {
//        var nodeRange = node.ownerDocument.createRange();
//        try {
//            nodeRange.selectNode(node);
//        } catch (e) {
//            nodeRange.selectNodeContents(node);
//        }
//    
//        var rangeStartRange = range.cloneRange();
//        rangeStartRange.collapse(true);
//    
//        var rangeEndRange = range.cloneRange();
//        rangeEndRange.collapse(false);
//    
//        var nodeStartRange = nodeRange.cloneRange();
//        nodeStartRange.collapse(true);
//    
//        var nodeEndRange = nodeRange.cloneRange();
//        nodeEndRange.collapse(false);
//    
//        return rangeStartRange.compareBoundaryPoints(
//                 Range.START_TO_START, nodeEndRange) == -1 &amp;&amp;
//               rangeEndRange.compareBoundaryPoints(
//                 Range.START_TO_START, nodeStartRange) == 1;
//        
//         
//    },
//    rangeCompareNode : function(range, node)
//    {
//        var nodeRange = node.ownerDocument.createRange();
//        try {
//            nodeRange.selectNode(node);
//        } catch (e) {
//            nodeRange.selectNodeContents(node);
//        }
//        
//        
//        range.collapse(true);
//    
//        nodeRange.collapse(true);
//     
//        var ss = range.compareBoundaryPoints( Range.START_TO_START, nodeRange);
//        var ee = range.compareBoundaryPoints(  Range.END_TO_END, nodeRange);
//         
//        //Roo.log(node.tagName + ': ss='+ss +', ee='+ee)
//        
//        var nodeIsBefore   =  ss == 1;
//        var nodeIsAfter    = ee == -1;
//        
//        if (nodeIsBefore &amp;&amp; nodeIsAfter)
//            return 0; // outer
//        if (!nodeIsBefore &amp;&amp; nodeIsAfter)
//            return 1; //right trailed.
//        
//        if (nodeIsBefore &amp;&amp; !nodeIsAfter)
//            return 2;  // left trailed.
//        // fully contined.
//        return 3;
//    },
//
//    // private? - in a new class?
//    cleanUpPaste :  function()
//    {
//        // cleans up the whole document..
//         Roo.log('cleanuppaste');
//        this.cleanUpChildren(this.doc.body);
//        var clean = this.cleanWordChars(this.doc.body.innerHTML);
//        if (clean != this.doc.body.innerHTML) {
//            this.doc.body.innerHTML = clean;
//        }
//        
//    },
//    
//    cleanWordChars : function(input) {// change the chars to hex code
//        var he = Roo.bootstrap.HtmlEditor;
//        
//        var output = input;
//        Roo.each(he.swapCodes, function(sw) { 
//            var swapper = new RegExp(&quot;\\u&quot; + sw[0].toString(16), &quot;g&quot;); // hex codes
//            
//            output = output.replace(swapper, sw[1]);
//        });
//        
//        return output;
//    },
//    
//    
//    cleanUpChildren : function (n)
//    {
//        if (!n.childNodes.length) {
//            return;
//        }
//        for (var i = n.childNodes.length-1; i &gt; -1 ; i--) {
//           this.cleanUpChild(n.childNodes[i]);
//        }
//    },
//    
//    
//        
//    
//    cleanUpChild : function (node)
//    {
//        var ed = this;
//        //console.log(node);
//        if (node.nodeName == &quot;#text&quot;) {
//            // clean up silly Windows -- stuff?
//            return; 
//        }
//        if (node.nodeName == &quot;#comment&quot;) {
//            node.parentNode.removeChild(node);
//            // clean up silly Windows -- stuff?
//            return; 
//        }
//        
//        if (Roo.bootstrap.HtmlEditor.black.indexOf(node.tagName.toLowerCase()) &gt; -1) {
//            // remove node.
//            node.parentNode.removeChild(node);
//            return;
//            
//        }
//        
//        var remove_keep_children= Roo.bootstrap.HtmlEditor.remove.indexOf(node.tagName.toLowerCase()) &gt; -1;
//        
//        // remove &lt;a name=....&gt; as rendering on yahoo mailer is borked with this.
//        // this will have to be flaged elsewhere - perhaps ablack=name... on the mailer..
//        
//        //if (node.tagName.toLowerCase() == 'a' &amp;&amp; !node.hasAttribute('href')) {
//        //    remove_keep_children = true;
//        //}
//        
//        if (remove_keep_children) {
//            this.cleanUpChildren(node);
//            // inserts everything just before this node...
//            while (node.childNodes.length) {
//                var cn = node.childNodes[0];
//                node.removeChild(cn);
//                node.parentNode.insertBefore(cn, node);
//            }
//            node.parentNode.removeChild(node);
//            return;
//        }
//        
//        if (!node.attributes || !node.attributes.length) {
//            this.cleanUpChildren(node);
//            return;
//        }
//        
//        function cleanAttr(n,v)
//        {
//            
//            if (v.match(/^\./) || v.match(/^\//)) {
//                return;
//            }
//            if (v.match(/^(http|https):\/\//) || v.match(/^mailto:/)) {
//                return;
//            }
//            if (v.match(/^#/)) {
//                return;
//            }
////            Roo.log(&quot;(REMOVE TAG)&quot;+ node.tagName +'.' + n + '=' + v);
//            node.removeAttribute(n);
//            
//        }
//        
//        function cleanStyle(n,v)
//        {
//            if (v.match(/expression/)) { //XSS?? should we even bother..
//                node.removeAttribute(n);
//                return;
//            }
//            var cwhite = typeof(ed.cwhite) == 'undefined' ? Roo.bootstrap.HtmlEditor.cwhite : ed.cwhite;
//            var cblack = typeof(ed.cblack) == 'undefined' ? Roo.bootstrap.HtmlEditor.cblack : ed.cblack;
//            
//            
//            var parts = v.split(/;/);
//            var clean = [];
//            
//            Roo.each(parts, function(p) {
//                p = p.replace(/^\s+/g,'').replace(/\s+$/g,'');
//                if (!p.length) {
//                    return true;
//                }
//                var l = p.split(':').shift().replace(/\s+/g,'');
//                l = l.replace(/^\s+/g,'').replace(/\s+$/g,'');
//                
//                
//                if ( cblack.indexOf(l) &gt; -1) {
////                    Roo.log('(REMOVE CSS)' + node.tagName +'.' + n + ':'+l + '=' + v);
//                    //node.removeAttribute(n);
//                    return true;
//                }
//                //Roo.log()
//                // only allow 'c whitelisted system attributes'
//                if ( cwhite.length &amp;&amp;  cwhite.indexOf(l) &lt; 0) {
////                    Roo.log('(REMOVE CSS)' + node.tagName +'.' + n + ':'+l + '=' + v);
//                    //node.removeAttribute(n);
//                    return true;
//                }
//                
//                
//                 
//                
//                clean.push(p);
//                return true;
//            });
//            if (clean.length) { 
//                node.setAttribute(n, clean.join(';'));
//            } else {
//                node.removeAttribute(n);
//            }
//            
//        }
//        
//        
//        for (var i = node.attributes.length-1; i &gt; -1 ; i--) {
//            var a = node.attributes[i];
//            //console.log(a);
//            
//            if (a.name.toLowerCase().substr(0,2)=='on')  {
//                node.removeAttribute(a.name);
//                continue;
//            }
//            if (Roo.bootstrap.HtmlEditor.ablack.indexOf(a.name.toLowerCase()) &gt; -1) {
//                node.removeAttribute(a.name);
//                continue;
//            }
//            if (Roo.bootstrap.HtmlEditor.aclean.indexOf(a.name.toLowerCase()) &gt; -1) {
//                cleanAttr(a.name,a.value); // fixme..
//                continue;
//            }
//            if (a.name == 'style') {
//                cleanStyle(a.name,a.value);
//                continue;
//            }
//            /// clean up MS crap..
//            // tecnically this should be a list of valid class'es..
//            
//            
//            if (a.name == 'class') {
//                if (a.value.match(/^Mso/)) {
//                    node.className = '';
//                }
//                
//                if (a.value.match(/body/)) {
//                    node.className = '';
//                }
//                continue;
//            }
//            
//            // style cleanup!?
//            // class cleanup?
//            
//        }
//        
//        
//        this.cleanUpChildren(node);
//        
//        
//    }
//    
//    
//    // hide stuff that is not compatible
//    /**
//     * @event blur
//     * @hide
//     */
//    /**
//     * @event change
//     * @hide
//     */
//    /**
//     * @event focus
//     * @hide
//     */
//    /**
//     * @event specialkey
//     * @hide
//     */
//    /**
//     * @cfg {String} fieldClass @hide
//     */
//    /**
//     * @cfg {String} focusClass @hide
//     */
//    /**
//     * @cfg {String} autoCreate @hide
//     */
//    /**
//     * @cfg {String} inputType @hide
//     */
//    /**
//     * @cfg {String} invalidClass @hide
//     */
//    /**
//     * @cfg {String} invalidText @hide
//     */
//    /**
//     * @cfg {String} msgFx @hide
//     */
//    /**
//     * @cfg {String} validateOnBlur @hide
//     */
</span><span class="jsdoc-syntax">});

</span><span class="jsdoc-var">Roo.bootstrap.HtmlEditor.white </span><span class="jsdoc-syntax">= [
        </span><span class="jsdoc-string">'area'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'br'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'img'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'input'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'hr'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'wbr'</span><span class="jsdoc-syntax">,
        
       </span><span class="jsdoc-string">'address'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'blockquote'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'center'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'dd'</span><span class="jsdoc-syntax">,      </span><span class="jsdoc-string">'dir'</span><span class="jsdoc-syntax">,       </span><span class="jsdoc-string">'div'</span><span class="jsdoc-syntax">, 
       </span><span class="jsdoc-string">'dl'</span><span class="jsdoc-syntax">,      </span><span class="jsdoc-string">'dt'</span><span class="jsdoc-syntax">,         </span><span class="jsdoc-string">'h1'</span><span class="jsdoc-syntax">,     </span><span class="jsdoc-string">'h2'</span><span class="jsdoc-syntax">,      </span><span class="jsdoc-string">'h3'</span><span class="jsdoc-syntax">,        </span><span class="jsdoc-string">'h4'</span><span class="jsdoc-syntax">, 
       </span><span class="jsdoc-string">'h5'</span><span class="jsdoc-syntax">,      </span><span class="jsdoc-string">'h6'</span><span class="jsdoc-syntax">,         </span><span class="jsdoc-string">'hr'</span><span class="jsdoc-syntax">,     </span><span class="jsdoc-string">'isindex'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'listing'</span><span class="jsdoc-syntax">,   </span><span class="jsdoc-string">'marquee'</span><span class="jsdoc-syntax">, 
       </span><span class="jsdoc-string">'menu'</span><span class="jsdoc-syntax">,    </span><span class="jsdoc-string">'multicol'</span><span class="jsdoc-syntax">,   </span><span class="jsdoc-string">'ol'</span><span class="jsdoc-syntax">,     </span><span class="jsdoc-string">'p'</span><span class="jsdoc-syntax">,       </span><span class="jsdoc-string">'plaintext'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'pre'</span><span class="jsdoc-syntax">, 
       </span><span class="jsdoc-string">'table'</span><span class="jsdoc-syntax">,   </span><span class="jsdoc-string">'ul'</span><span class="jsdoc-syntax">,         </span><span class="jsdoc-string">'xmp'</span><span class="jsdoc-syntax">, 
       
       </span><span class="jsdoc-string">'caption'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'col'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'colgroup'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'tbody'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'td'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'tfoot'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'th'</span><span class="jsdoc-syntax">, 
      </span><span class="jsdoc-string">'thead'</span><span class="jsdoc-syntax">,   </span><span class="jsdoc-string">'tr'</span><span class="jsdoc-syntax">, 
     
      </span><span class="jsdoc-string">'dir'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'menu'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'ol'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'ul'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'dl'</span><span class="jsdoc-syntax">,
       
      </span><span class="jsdoc-string">'embed'</span><span class="jsdoc-syntax">,  </span><span class="jsdoc-string">'object'
</span><span class="jsdoc-syntax">];


</span><span class="jsdoc-var">Roo.bootstrap.HtmlEditor.black </span><span class="jsdoc-syntax">= [
    </span><span class="jsdoc-comment">//    'embed',  'object', // enable - backend responsiblity to clean thiese
        </span><span class="jsdoc-string">'applet'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-comment">// 
        </span><span class="jsdoc-string">'base'</span><span class="jsdoc-syntax">,   </span><span class="jsdoc-string">'basefont'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'bgsound'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'blink'</span><span class="jsdoc-syntax">,  </span><span class="jsdoc-string">'body'</span><span class="jsdoc-syntax">, 
        </span><span class="jsdoc-string">'frame'</span><span class="jsdoc-syntax">,  </span><span class="jsdoc-string">'frameset'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'head'</span><span class="jsdoc-syntax">,    </span><span class="jsdoc-string">'html'</span><span class="jsdoc-syntax">,   </span><span class="jsdoc-string">'ilayer'</span><span class="jsdoc-syntax">, 
        </span><span class="jsdoc-string">'iframe'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'layer'</span><span class="jsdoc-syntax">,  </span><span class="jsdoc-string">'link'</span><span class="jsdoc-syntax">,     </span><span class="jsdoc-string">'meta'</span><span class="jsdoc-syntax">,    </span><span class="jsdoc-string">'object'</span><span class="jsdoc-syntax">,   
        </span><span class="jsdoc-string">'script'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'style' </span><span class="jsdoc-syntax">,</span><span class="jsdoc-string">'title'</span><span class="jsdoc-syntax">,  </span><span class="jsdoc-string">'xml' </span><span class="jsdoc-comment">// clean later..
</span><span class="jsdoc-syntax">];
</span><span class="jsdoc-var">Roo.bootstrap.HtmlEditor.clean </span><span class="jsdoc-syntax">= [
    </span><span class="jsdoc-string">'script'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'style'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'title'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'xml'
</span><span class="jsdoc-syntax">];
</span><span class="jsdoc-var">Roo.bootstrap.HtmlEditor.remove </span><span class="jsdoc-syntax">= [
    </span><span class="jsdoc-string">'font'
</span><span class="jsdoc-syntax">];
</span><span class="jsdoc-comment">// attributes..

</span><span class="jsdoc-var">Roo.bootstrap.HtmlEditor.ablack </span><span class="jsdoc-syntax">= [
    </span><span class="jsdoc-string">'on'
</span><span class="jsdoc-syntax">];
    
</span><span class="jsdoc-var">Roo.bootstrap.HtmlEditor.aclean </span><span class="jsdoc-syntax">= [ 
    </span><span class="jsdoc-string">'action'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'background'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'codebase'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'dynsrc'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'href'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">'lowsrc' 
</span><span class="jsdoc-syntax">];

</span><span class="jsdoc-comment">// protocols..
</span><span class="jsdoc-var">Roo.bootstrap.HtmlEditor.pwhite</span><span class="jsdoc-syntax">= [
        </span><span class="jsdoc-string">'http'</span><span class="jsdoc-syntax">,  </span><span class="jsdoc-string">'https'</span><span class="jsdoc-syntax">,  </span><span class="jsdoc-string">'mailto'
</span><span class="jsdoc-syntax">];

</span><span class="jsdoc-comment">// white listed style attributes.
</span><span class="jsdoc-var">Roo.bootstrap.HtmlEditor.cwhite</span><span class="jsdoc-syntax">= [
      </span><span class="jsdoc-comment">//  'text-align', /// default is to allow most things..
      
         
//        'font-size'//??
</span><span class="jsdoc-syntax">];

</span><span class="jsdoc-comment">// black listed style attributes.
</span><span class="jsdoc-var">Roo.bootstrap.HtmlEditor.cblack</span><span class="jsdoc-syntax">= [
      </span><span class="jsdoc-comment">//  'font-size' -- this can be set by the project 
</span><span class="jsdoc-syntax">];


</span><span class="jsdoc-var">Roo.bootstrap.HtmlEditor.swapCodes   </span><span class="jsdoc-syntax">=[ 
    [    8211, </span><span class="jsdoc-string">&quot;--&quot; </span><span class="jsdoc-syntax">], 
    [    8212, </span><span class="jsdoc-string">&quot;--&quot; </span><span class="jsdoc-syntax">], 
    [    8216,  </span><span class="jsdoc-string">&quot;'&quot; </span><span class="jsdoc-syntax">],  
    [    8217, </span><span class="jsdoc-string">&quot;'&quot; </span><span class="jsdoc-syntax">],  
    [    8220, </span><span class="jsdoc-string">'&quot;' </span><span class="jsdoc-syntax">],  
    [    8221, </span><span class="jsdoc-string">'&quot;' </span><span class="jsdoc-syntax">],  
    [    8226, </span><span class="jsdoc-string">&quot;*&quot; </span><span class="jsdoc-syntax">],  
    [    8230, </span><span class="jsdoc-string">&quot;...&quot; </span><span class="jsdoc-syntax">]
]; 

    </span></code></body></html>