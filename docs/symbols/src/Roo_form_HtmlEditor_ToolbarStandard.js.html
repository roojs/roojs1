<html><head><title>../roojs1/Roo/form/HtmlEditor/ToolbarStandard.js</title><link rel="stylesheet" type="text/css" href="../../../css/highlight-js.css"/></head><body class="highlightpage"><code class="jsdoc-pretty"><span class="jsdoc-comment">// &lt;script type=&quot;text/javascript&quot;&gt;
/*
 * Based on
 * Ext JS Library 1.1.1
 * Copyright(c) 2006-2007, Ext JS, LLC.
 *  
 
 */

/**
 * @class Roo.form.HtmlEditorToolbar1
 * Basic Toolbar
 * 
 * Usage:
 *
 new Roo.form.HtmlEditor({
    ....
    toolbars : [
        new Roo.form.HtmlEditorToolbar1({
            disable : { fonts: 1 , format: 1, ..., ... , ...],
            btns : [ .... ]
        })
    }
     
 * 
 * @cfg {Object} disable List of elements to disable..
 * @cfg {Array} btns List of additional buttons.
 * 
 * 
 * NEEDS Extra CSS? 
 * .x-html-editor-tb .x-edit-none .x-btn-text { background: none; }
 */
 
</span><span class="jsdoc-var">Roo.form.HtmlEditor.ToolbarStandard </span><span class="jsdoc-syntax">= </span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">config</span><span class="jsdoc-syntax">)
{
    
    </span><span class="jsdoc-var">Roo.apply</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">this</span><span class="jsdoc-syntax">, </span><span class="jsdoc-var">config</span><span class="jsdoc-syntax">);
    
    </span><span class="jsdoc-comment">// default disabled, based on 'good practice'..
    </span><span class="jsdoc-var">this.disable </span><span class="jsdoc-syntax">= </span><span class="jsdoc-var">this.disable </span><span class="jsdoc-syntax">|| {};
    </span><span class="jsdoc-var">Roo.applyIf</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">this.disable</span><span class="jsdoc-syntax">, {
        </span><span class="jsdoc-var">fontSize </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">,
        </span><span class="jsdoc-var">colors </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">,
        </span><span class="jsdoc-var">specialElements </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">true
    </span><span class="jsdoc-syntax">});
    
    
    </span><span class="jsdoc-comment">//Roo.form.HtmlEditorToolbar1.superclass.constructor.call(this, editor.wrap.dom.firstChild, [], config);
    // dont call parent... till later.
</span><span class="jsdoc-syntax">}

</span><span class="jsdoc-var">Roo.apply</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">Roo.form.HtmlEditor.ToolbarStandard.prototype</span><span class="jsdoc-syntax">,  {
    
    </span><span class="jsdoc-var">tb</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">,
    
    </span><span class="jsdoc-var">rendered</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">,
    
    </span><span class="jsdoc-var">editor </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">,
    </span><span class="jsdoc-comment">/**
     * @cfg {Object} disable  List of toolbar elements to disable
         
     */
    </span><span class="jsdoc-var">disable </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">,
      </span><span class="jsdoc-comment">/**
     * @cfg {Array} fontFamilies An array of available font families
     */
    </span><span class="jsdoc-var">fontFamilies </span><span class="jsdoc-syntax">: [
        </span><span class="jsdoc-string">'Arial'</span><span class="jsdoc-syntax">,
        </span><span class="jsdoc-string">'Courier New'</span><span class="jsdoc-syntax">,
        </span><span class="jsdoc-string">'Tahoma'</span><span class="jsdoc-syntax">,
        </span><span class="jsdoc-string">'Times New Roman'</span><span class="jsdoc-syntax">,
        </span><span class="jsdoc-string">'Verdana'
    </span><span class="jsdoc-syntax">],
    
    </span><span class="jsdoc-var">specialChars </span><span class="jsdoc-syntax">: [
           </span><span class="jsdoc-string">&quot;&amp;#169;&quot;</span><span class="jsdoc-syntax">,
          </span><span class="jsdoc-string">&quot;&amp;#174;&quot;</span><span class="jsdoc-syntax">,     
          </span><span class="jsdoc-string">&quot;&amp;#8482;&quot;</span><span class="jsdoc-syntax">,    
          </span><span class="jsdoc-string">&quot;&amp;#163;&quot; </span><span class="jsdoc-syntax">,    
         </span><span class="jsdoc-comment">// &quot;&amp;#8212;&quot;,    
          </span><span class="jsdoc-string">&quot;&amp;#8230;&quot;</span><span class="jsdoc-syntax">,    
          </span><span class="jsdoc-string">&quot;&amp;#247;&quot; </span><span class="jsdoc-syntax">,    
        </span><span class="jsdoc-comment">//  &quot;&amp;#225;&quot; ,     ?? a acute?
           </span><span class="jsdoc-string">&quot;&amp;#8364;&quot;    </span><span class="jsdoc-syntax">, </span><span class="jsdoc-comment">//Euro
       //   &quot;&amp;#8220;&quot;    ,
        //  &quot;&amp;#8221;&quot;    ,
        //  &quot;&amp;#8226;&quot;    ,
          </span><span class="jsdoc-string">&quot;&amp;#176;&quot;  </span><span class="jsdoc-comment">//   , // degrees

         // &quot;&amp;#233;&quot;     , // e ecute
         // &quot;&amp;#250;&quot;     , // u ecute?
    </span><span class="jsdoc-syntax">],
    
    </span><span class="jsdoc-var">specialElements </span><span class="jsdoc-syntax">: [
        {
            </span><span class="jsdoc-var">text</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">&quot;Insert Table&quot;</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">xtype</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'MenuItem'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">xns </span><span class="jsdoc-syntax">: </span><span class="jsdoc-var">Roo.Menu</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">ihtml </span><span class="jsdoc-syntax">:  </span><span class="jsdoc-string">'&lt;table&gt;&lt;tr&gt;&lt;td&gt;Cell&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;' 
                
        </span><span class="jsdoc-syntax">},
        {    
            </span><span class="jsdoc-var">text</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">&quot;Insert Image&quot;</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">xtype</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'MenuItem'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">xns </span><span class="jsdoc-syntax">: </span><span class="jsdoc-var">Roo.Menu</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">ihtml </span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'&lt;img src=&quot;about:blank&quot;/&gt;'
            
        </span><span class="jsdoc-syntax">}
        
         
    ],
    
    
    </span><span class="jsdoc-var">inputElements </span><span class="jsdoc-syntax">: [ 
            </span><span class="jsdoc-string">&quot;form&quot;</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">&quot;input:text&quot;</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">&quot;input:hidden&quot;</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">&quot;input:checkbox&quot;</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">&quot;input:radio&quot;</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">&quot;input:password&quot;</span><span class="jsdoc-syntax">, 
            </span><span class="jsdoc-string">&quot;input:submit&quot;</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">&quot;input:button&quot;</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">&quot;select&quot;</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">&quot;textarea&quot;</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">&quot;label&quot; </span><span class="jsdoc-syntax">],
    </span><span class="jsdoc-var">formats </span><span class="jsdoc-syntax">: [
        [</span><span class="jsdoc-string">&quot;p&quot;</span><span class="jsdoc-syntax">] ,  
        [</span><span class="jsdoc-string">&quot;h1&quot;</span><span class="jsdoc-syntax">],[</span><span class="jsdoc-string">&quot;h2&quot;</span><span class="jsdoc-syntax">],[</span><span class="jsdoc-string">&quot;h3&quot;</span><span class="jsdoc-syntax">],[</span><span class="jsdoc-string">&quot;h4&quot;</span><span class="jsdoc-syntax">],[</span><span class="jsdoc-string">&quot;h5&quot;</span><span class="jsdoc-syntax">],[</span><span class="jsdoc-string">&quot;h6&quot;</span><span class="jsdoc-syntax">], 
        [</span><span class="jsdoc-string">&quot;pre&quot;</span><span class="jsdoc-syntax">],[ </span><span class="jsdoc-string">&quot;code&quot;</span><span class="jsdoc-syntax">], 
        [</span><span class="jsdoc-string">&quot;abbr&quot;</span><span class="jsdoc-syntax">],[ </span><span class="jsdoc-string">&quot;acronym&quot;</span><span class="jsdoc-syntax">],[ </span><span class="jsdoc-string">&quot;address&quot;</span><span class="jsdoc-syntax">],[ </span><span class="jsdoc-string">&quot;cite&quot;</span><span class="jsdoc-syntax">],[ </span><span class="jsdoc-string">&quot;samp&quot;</span><span class="jsdoc-syntax">],[ </span><span class="jsdoc-string">&quot;var&quot;</span><span class="jsdoc-syntax">]
    ],
     </span><span class="jsdoc-comment">/**
     * @cfg {String} defaultFont default font to use.
     */
    </span><span class="jsdoc-var">defaultFont</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'tahoma'</span><span class="jsdoc-syntax">,
   
    </span><span class="jsdoc-var">fontSelect </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">,
    
    
    </span><span class="jsdoc-var">formatCombo </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">,
    
    </span><span class="jsdoc-var">init </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">editor</span><span class="jsdoc-syntax">)
    {
        </span><span class="jsdoc-var">this.editor </span><span class="jsdoc-syntax">= </span><span class="jsdoc-var">editor</span><span class="jsdoc-syntax">;
        
        
        </span><span class="jsdoc-keyword">var </span><span class="jsdoc-var">fid </span><span class="jsdoc-syntax">= </span><span class="jsdoc-var">editor.frameId</span><span class="jsdoc-syntax">;
        </span><span class="jsdoc-keyword">var </span><span class="jsdoc-var">etb </span><span class="jsdoc-syntax">= </span><span class="jsdoc-var">this</span><span class="jsdoc-syntax">;
        </span><span class="jsdoc-keyword">function </span><span class="jsdoc-var">btn</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">id</span><span class="jsdoc-syntax">, </span><span class="jsdoc-var">toggle</span><span class="jsdoc-syntax">, </span><span class="jsdoc-var">handler</span><span class="jsdoc-syntax">){
            </span><span class="jsdoc-keyword">var </span><span class="jsdoc-var">xid </span><span class="jsdoc-syntax">= </span><span class="jsdoc-var">fid </span><span class="jsdoc-syntax">+ </span><span class="jsdoc-string">'-'</span><span class="jsdoc-syntax">+ </span><span class="jsdoc-var">id </span><span class="jsdoc-syntax">;
            </span><span class="jsdoc-keyword">return </span><span class="jsdoc-syntax">{
                </span><span class="jsdoc-var">id </span><span class="jsdoc-syntax">: </span><span class="jsdoc-var">xid</span><span class="jsdoc-syntax">,
                </span><span class="jsdoc-var">cmd </span><span class="jsdoc-syntax">: </span><span class="jsdoc-var">id</span><span class="jsdoc-syntax">,
                </span><span class="jsdoc-var">cls </span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'x-btn-icon x-edit-'</span><span class="jsdoc-syntax">+</span><span class="jsdoc-var">id</span><span class="jsdoc-syntax">,
                </span><span class="jsdoc-var">enableToggle</span><span class="jsdoc-syntax">:</span><span class="jsdoc-var">toggle </span><span class="jsdoc-syntax">!== </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">,
                </span><span class="jsdoc-var">scope</span><span class="jsdoc-syntax">: </span><span class="jsdoc-var">editor</span><span class="jsdoc-syntax">, </span><span class="jsdoc-comment">// was editor...
                </span><span class="jsdoc-var">handler</span><span class="jsdoc-syntax">:</span><span class="jsdoc-var">handler</span><span class="jsdoc-syntax">||</span><span class="jsdoc-var">editor.relayBtnCmd</span><span class="jsdoc-syntax">,
                </span><span class="jsdoc-var">clickEvent</span><span class="jsdoc-syntax">:</span><span class="jsdoc-string">'mousedown'</span><span class="jsdoc-syntax">,
                </span><span class="jsdoc-var">tooltip</span><span class="jsdoc-syntax">: </span><span class="jsdoc-var">etb.buttonTips</span><span class="jsdoc-syntax">[</span><span class="jsdoc-var">id</span><span class="jsdoc-syntax">] || </span><span class="jsdoc-var">undefined</span><span class="jsdoc-syntax">, </span><span class="jsdoc-comment">///tips ???
                </span><span class="jsdoc-var">tabIndex</span><span class="jsdoc-syntax">:-1
            };
        }
        
        
        
        </span><span class="jsdoc-keyword">var </span><span class="jsdoc-var">tb </span><span class="jsdoc-syntax">= </span><span class="jsdoc-keyword">new </span><span class="jsdoc-var">Roo.Toolbar</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">editor.wrap.dom.firstChild</span><span class="jsdoc-syntax">);
        </span><span class="jsdoc-var">this.tb </span><span class="jsdoc-syntax">= </span><span class="jsdoc-var">tb</span><span class="jsdoc-syntax">;
         </span><span class="jsdoc-comment">// stop form submits
        </span><span class="jsdoc-var">tb.el.on</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'click'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">e</span><span class="jsdoc-syntax">){
            </span><span class="jsdoc-var">e.preventDefault</span><span class="jsdoc-syntax">(); </span><span class="jsdoc-comment">// what does this do?
        </span><span class="jsdoc-syntax">});

        </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(!</span><span class="jsdoc-var">this.disable.font </span><span class="jsdoc-syntax">&amp;&amp; !</span><span class="jsdoc-var">Roo.isSafari</span><span class="jsdoc-syntax">){
            </span><span class="jsdoc-comment">/* why no safari for fonts
            editor.fontSelect = tb.el.createChild({
                tag:'select',
                tabIndex: -1,
                cls:'x-font-select',
                html: editor.createFontOptions()
            });
            editor.fontSelect.on('change', function(){
                var font = editor.fontSelect.dom.value;
                editor.relayCmd('fontname', font);
                editor.deferFocus();
            }, editor);
            tb.add(
                editor.fontSelect.dom,
                '-'
            );
            */
        </span><span class="jsdoc-syntax">};
        </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(!</span><span class="jsdoc-var">this.disable.formats</span><span class="jsdoc-syntax">){
            </span><span class="jsdoc-var">this.formatCombo </span><span class="jsdoc-syntax">= </span><span class="jsdoc-keyword">new </span><span class="jsdoc-var">Roo.form.ComboBox</span><span class="jsdoc-syntax">({
                </span><span class="jsdoc-var">store</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">new </span><span class="jsdoc-var">Roo.data.SimpleStore</span><span class="jsdoc-syntax">({
                    </span><span class="jsdoc-var">id </span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'tag'</span><span class="jsdoc-syntax">,
                    </span><span class="jsdoc-var">fields</span><span class="jsdoc-syntax">: [</span><span class="jsdoc-string">'tag'</span><span class="jsdoc-syntax">],
                    </span><span class="jsdoc-var">data </span><span class="jsdoc-syntax">: </span><span class="jsdoc-var">this.formats </span><span class="jsdoc-comment">// from states.js
                </span><span class="jsdoc-syntax">}),
                </span><span class="jsdoc-var">blockFocus </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">,
                </span><span class="jsdoc-comment">//autoCreate : {tag: &quot;div&quot;,  size: &quot;20&quot;},
                </span><span class="jsdoc-var">displayField</span><span class="jsdoc-syntax">:</span><span class="jsdoc-string">'tag'</span><span class="jsdoc-syntax">,
                </span><span class="jsdoc-var">typeAhead</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">,
                </span><span class="jsdoc-var">mode</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'local'</span><span class="jsdoc-syntax">,
                </span><span class="jsdoc-var">editable </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">,
                </span><span class="jsdoc-var">triggerAction</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'all'</span><span class="jsdoc-syntax">,
                </span><span class="jsdoc-var">emptyText</span><span class="jsdoc-syntax">:</span><span class="jsdoc-string">'Add tag'</span><span class="jsdoc-syntax">,
                </span><span class="jsdoc-var">selectOnFocus</span><span class="jsdoc-syntax">:</span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">,
                </span><span class="jsdoc-var">width</span><span class="jsdoc-syntax">:135,
                </span><span class="jsdoc-var">listeners </span><span class="jsdoc-syntax">: {
                    </span><span class="jsdoc-string">'select'</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">c</span><span class="jsdoc-syntax">, </span><span class="jsdoc-var">r</span><span class="jsdoc-syntax">, </span><span class="jsdoc-var">i</span><span class="jsdoc-syntax">) {
                        </span><span class="jsdoc-var">editor.insertTag</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">r.get</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'tag'</span><span class="jsdoc-syntax">));
                        </span><span class="jsdoc-var">editor.focus</span><span class="jsdoc-syntax">();
                    }
                }

            });
            </span><span class="jsdoc-var">tb.addField</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">this.formatCombo</span><span class="jsdoc-syntax">);
            
        }
        
        </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(!</span><span class="jsdoc-var">this.disable.format</span><span class="jsdoc-syntax">){
            </span><span class="jsdoc-var">tb.add</span><span class="jsdoc-syntax">(
                </span><span class="jsdoc-var">btn</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'bold'</span><span class="jsdoc-syntax">),
                </span><span class="jsdoc-var">btn</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'italic'</span><span class="jsdoc-syntax">),
                </span><span class="jsdoc-var">btn</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'underline'</span><span class="jsdoc-syntax">)
            );
        };
        </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(!</span><span class="jsdoc-var">this.disable.fontSize</span><span class="jsdoc-syntax">){
            </span><span class="jsdoc-var">tb.add</span><span class="jsdoc-syntax">(
                </span><span class="jsdoc-string">'-'</span><span class="jsdoc-syntax">,
                
                
                </span><span class="jsdoc-var">btn</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'increasefontsize'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">, </span><span class="jsdoc-var">editor.adjustFont</span><span class="jsdoc-syntax">),
                </span><span class="jsdoc-var">btn</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'decreasefontsize'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">, </span><span class="jsdoc-var">editor.adjustFont</span><span class="jsdoc-syntax">)
            );
        };
        
        
        </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(!</span><span class="jsdoc-var">this.disable.colors</span><span class="jsdoc-syntax">){
            </span><span class="jsdoc-var">tb.add</span><span class="jsdoc-syntax">(
                </span><span class="jsdoc-string">'-'</span><span class="jsdoc-syntax">, {
                    </span><span class="jsdoc-var">id</span><span class="jsdoc-syntax">:</span><span class="jsdoc-var">editor.frameId </span><span class="jsdoc-syntax">+</span><span class="jsdoc-string">'-forecolor'</span><span class="jsdoc-syntax">,
                    </span><span class="jsdoc-var">cls</span><span class="jsdoc-syntax">:</span><span class="jsdoc-string">'x-btn-icon x-edit-forecolor'</span><span class="jsdoc-syntax">,
                    </span><span class="jsdoc-var">clickEvent</span><span class="jsdoc-syntax">:</span><span class="jsdoc-string">'mousedown'</span><span class="jsdoc-syntax">,
                    </span><span class="jsdoc-var">tooltip</span><span class="jsdoc-syntax">: </span><span class="jsdoc-var">this.buttonTips</span><span class="jsdoc-syntax">[</span><span class="jsdoc-string">'forecolor'</span><span class="jsdoc-syntax">] || </span><span class="jsdoc-var">undefined</span><span class="jsdoc-syntax">,
                    </span><span class="jsdoc-var">tabIndex</span><span class="jsdoc-syntax">:-1,
                    </span><span class="jsdoc-var">menu </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">new </span><span class="jsdoc-var">Roo.menu.ColorMenu</span><span class="jsdoc-syntax">({
                        </span><span class="jsdoc-var">allowReselect</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">,
                        </span><span class="jsdoc-var">focus</span><span class="jsdoc-syntax">: </span><span class="jsdoc-var">Roo.emptyFn</span><span class="jsdoc-syntax">,
                        </span><span class="jsdoc-var">value</span><span class="jsdoc-syntax">:</span><span class="jsdoc-string">'000000'</span><span class="jsdoc-syntax">,
                        </span><span class="jsdoc-var">plain</span><span class="jsdoc-syntax">:</span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">,
                        </span><span class="jsdoc-var">selectHandler</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">cp</span><span class="jsdoc-syntax">, </span><span class="jsdoc-var">color</span><span class="jsdoc-syntax">){
                            </span><span class="jsdoc-var">editor.execCmd</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'forecolor'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-var">Roo.isSafari </span><span class="jsdoc-syntax">|| </span><span class="jsdoc-var">Roo.isIE </span><span class="jsdoc-syntax">? </span><span class="jsdoc-string">'#'</span><span class="jsdoc-syntax">+</span><span class="jsdoc-var">color </span><span class="jsdoc-syntax">: </span><span class="jsdoc-var">color</span><span class="jsdoc-syntax">);
                            </span><span class="jsdoc-var">editor.deferFocus</span><span class="jsdoc-syntax">();
                        },
                        </span><span class="jsdoc-var">scope</span><span class="jsdoc-syntax">: </span><span class="jsdoc-var">editor</span><span class="jsdoc-syntax">,
                        </span><span class="jsdoc-var">clickEvent</span><span class="jsdoc-syntax">:</span><span class="jsdoc-string">'mousedown'
                    </span><span class="jsdoc-syntax">})
                }, {
                    </span><span class="jsdoc-var">id</span><span class="jsdoc-syntax">:</span><span class="jsdoc-var">editor.frameId </span><span class="jsdoc-syntax">+</span><span class="jsdoc-string">'backcolor'</span><span class="jsdoc-syntax">,
                    </span><span class="jsdoc-var">cls</span><span class="jsdoc-syntax">:</span><span class="jsdoc-string">'x-btn-icon x-edit-backcolor'</span><span class="jsdoc-syntax">,
                    </span><span class="jsdoc-var">clickEvent</span><span class="jsdoc-syntax">:</span><span class="jsdoc-string">'mousedown'</span><span class="jsdoc-syntax">,
                    </span><span class="jsdoc-var">tooltip</span><span class="jsdoc-syntax">: </span><span class="jsdoc-var">this.buttonTips</span><span class="jsdoc-syntax">[</span><span class="jsdoc-string">'backcolor'</span><span class="jsdoc-syntax">] || </span><span class="jsdoc-var">undefined</span><span class="jsdoc-syntax">,
                    </span><span class="jsdoc-var">tabIndex</span><span class="jsdoc-syntax">:-1,
                    </span><span class="jsdoc-var">menu </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">new </span><span class="jsdoc-var">Roo.menu.ColorMenu</span><span class="jsdoc-syntax">({
                        </span><span class="jsdoc-var">focus</span><span class="jsdoc-syntax">: </span><span class="jsdoc-var">Roo.emptyFn</span><span class="jsdoc-syntax">,
                        </span><span class="jsdoc-var">value</span><span class="jsdoc-syntax">:</span><span class="jsdoc-string">'FFFFFF'</span><span class="jsdoc-syntax">,
                        </span><span class="jsdoc-var">plain</span><span class="jsdoc-syntax">:</span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">,
                        </span><span class="jsdoc-var">allowReselect</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">,
                        </span><span class="jsdoc-var">selectHandler</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">cp</span><span class="jsdoc-syntax">, </span><span class="jsdoc-var">color</span><span class="jsdoc-syntax">){
                            </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">Roo.isGecko</span><span class="jsdoc-syntax">){
                                </span><span class="jsdoc-var">editor.execCmd</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'useCSS'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">);
                                </span><span class="jsdoc-var">editor.execCmd</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'hilitecolor'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-var">color</span><span class="jsdoc-syntax">);
                                </span><span class="jsdoc-var">editor.execCmd</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'useCSS'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">);
                                </span><span class="jsdoc-var">editor.deferFocus</span><span class="jsdoc-syntax">();
                            }</span><span class="jsdoc-keyword">else</span><span class="jsdoc-syntax">{
                                </span><span class="jsdoc-var">editor.execCmd</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">Roo.isOpera </span><span class="jsdoc-syntax">? </span><span class="jsdoc-string">'hilitecolor' </span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'backcolor'</span><span class="jsdoc-syntax">, 
                                    </span><span class="jsdoc-var">Roo.isSafari </span><span class="jsdoc-syntax">|| </span><span class="jsdoc-var">Roo.isIE </span><span class="jsdoc-syntax">? </span><span class="jsdoc-string">'#'</span><span class="jsdoc-syntax">+</span><span class="jsdoc-var">color </span><span class="jsdoc-syntax">: </span><span class="jsdoc-var">color</span><span class="jsdoc-syntax">);
                                </span><span class="jsdoc-var">editor.deferFocus</span><span class="jsdoc-syntax">();
                            }
                        },
                        </span><span class="jsdoc-var">scope</span><span class="jsdoc-syntax">:</span><span class="jsdoc-var">editor</span><span class="jsdoc-syntax">,
                        </span><span class="jsdoc-var">clickEvent</span><span class="jsdoc-syntax">:</span><span class="jsdoc-string">'mousedown'
                    </span><span class="jsdoc-syntax">})
                }
            );
        };
        </span><span class="jsdoc-comment">// now add all the items...
        

        </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(!</span><span class="jsdoc-var">this.disable.alignments</span><span class="jsdoc-syntax">){
            </span><span class="jsdoc-var">tb.add</span><span class="jsdoc-syntax">(
                </span><span class="jsdoc-string">'-'</span><span class="jsdoc-syntax">,
                </span><span class="jsdoc-var">btn</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'justifyleft'</span><span class="jsdoc-syntax">),
                </span><span class="jsdoc-var">btn</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'justifycenter'</span><span class="jsdoc-syntax">),
                </span><span class="jsdoc-var">btn</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'justifyright'</span><span class="jsdoc-syntax">)
            );
        };

        </span><span class="jsdoc-comment">//if(!Roo.isSafari){
            </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(!</span><span class="jsdoc-var">this.disable.links</span><span class="jsdoc-syntax">){
                </span><span class="jsdoc-var">tb.add</span><span class="jsdoc-syntax">(
                    </span><span class="jsdoc-string">'-'</span><span class="jsdoc-syntax">,
                    </span><span class="jsdoc-var">btn</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'createlink'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">, </span><span class="jsdoc-var">editor.createLink</span><span class="jsdoc-syntax">)    </span><span class="jsdoc-comment">/// MOVE TO HERE?!!?!?!?!
                </span><span class="jsdoc-syntax">);
            };

            </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(!</span><span class="jsdoc-var">this.disable.lists</span><span class="jsdoc-syntax">){
                </span><span class="jsdoc-var">tb.add</span><span class="jsdoc-syntax">(
                    </span><span class="jsdoc-string">'-'</span><span class="jsdoc-syntax">,
                    </span><span class="jsdoc-var">btn</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'insertorderedlist'</span><span class="jsdoc-syntax">),
                    </span><span class="jsdoc-var">btn</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'insertunorderedlist'</span><span class="jsdoc-syntax">)
                );
            }
            </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(!</span><span class="jsdoc-var">this.disable.sourceEdit</span><span class="jsdoc-syntax">){
                </span><span class="jsdoc-var">tb.add</span><span class="jsdoc-syntax">(
                    </span><span class="jsdoc-string">'-'</span><span class="jsdoc-syntax">,
                    </span><span class="jsdoc-var">btn</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'sourceedit'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">, </span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">btn</span><span class="jsdoc-syntax">){
                        </span><span class="jsdoc-var">this.toggleSourceEdit</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">btn.pressed</span><span class="jsdoc-syntax">);
                    })
                );
            }
        </span><span class="jsdoc-comment">//}
        
        </span><span class="jsdoc-keyword">var </span><span class="jsdoc-var">smenu </span><span class="jsdoc-syntax">= { };
        </span><span class="jsdoc-comment">// special menu.. - needs to be tidied up..
        </span><span class="jsdoc-keyword">if </span><span class="jsdoc-syntax">(!</span><span class="jsdoc-var">this.disable.special</span><span class="jsdoc-syntax">) {
            </span><span class="jsdoc-var">smenu </span><span class="jsdoc-syntax">= {
                </span><span class="jsdoc-var">text</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">&quot;&amp;#169;&quot;</span><span class="jsdoc-syntax">,
                </span><span class="jsdoc-var">cls</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'x-edit-none'</span><span class="jsdoc-syntax">,
                
                </span><span class="jsdoc-var">menu </span><span class="jsdoc-syntax">: {
                    </span><span class="jsdoc-var">items </span><span class="jsdoc-syntax">: []
                }
            };
            </span><span class="jsdoc-keyword">for </span><span class="jsdoc-syntax">(</span><span class="jsdoc-keyword">var </span><span class="jsdoc-var">i </span><span class="jsdoc-syntax">=0; </span><span class="jsdoc-var">i </span><span class="jsdoc-syntax">&lt; </span><span class="jsdoc-var">this.specialChars.length</span><span class="jsdoc-syntax">; </span><span class="jsdoc-var">i</span><span class="jsdoc-syntax">++) {
                </span><span class="jsdoc-var">smenu.menu.items.push</span><span class="jsdoc-syntax">({
                    
                    </span><span class="jsdoc-var">html</span><span class="jsdoc-syntax">: </span><span class="jsdoc-var">this.specialChars</span><span class="jsdoc-syntax">[</span><span class="jsdoc-var">i</span><span class="jsdoc-syntax">],
                    </span><span class="jsdoc-var">handler</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">a</span><span class="jsdoc-syntax">,</span><span class="jsdoc-var">b</span><span class="jsdoc-syntax">) {
                        </span><span class="jsdoc-var">editor.insertAtCursor</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">String.fromCharCode</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">a.html.replace</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'&amp;#'</span><span class="jsdoc-syntax">,</span><span class="jsdoc-string">''</span><span class="jsdoc-syntax">)</span><span class="jsdoc-var">.replace</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">';'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-string">''</span><span class="jsdoc-syntax">)));
                        </span><span class="jsdoc-comment">//editor.insertAtCursor(a.html);
                        
                    </span><span class="jsdoc-syntax">},
                    </span><span class="jsdoc-var">tabIndex</span><span class="jsdoc-syntax">:-1
                });
            }
            
            
            </span><span class="jsdoc-var">tb.add</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">smenu</span><span class="jsdoc-syntax">);
            
            
        }
         
        </span><span class="jsdoc-keyword">if </span><span class="jsdoc-syntax">(!</span><span class="jsdoc-var">this.disable.specialElements</span><span class="jsdoc-syntax">) {
            </span><span class="jsdoc-keyword">var </span><span class="jsdoc-var">semenu </span><span class="jsdoc-syntax">= {
                </span><span class="jsdoc-var">text</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">&quot;Other;&quot;</span><span class="jsdoc-syntax">,
                </span><span class="jsdoc-var">cls</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'x-edit-none'</span><span class="jsdoc-syntax">,
                </span><span class="jsdoc-var">menu </span><span class="jsdoc-syntax">: {
                    </span><span class="jsdoc-var">items </span><span class="jsdoc-syntax">: []
                }
            };
            </span><span class="jsdoc-keyword">for </span><span class="jsdoc-syntax">(</span><span class="jsdoc-keyword">var </span><span class="jsdoc-var">i </span><span class="jsdoc-syntax">=0; </span><span class="jsdoc-var">i </span><span class="jsdoc-syntax">&lt; </span><span class="jsdoc-var">this.specialElements.length</span><span class="jsdoc-syntax">; </span><span class="jsdoc-var">i</span><span class="jsdoc-syntax">++) {
                </span><span class="jsdoc-var">semenu.menu.items.push</span><span class="jsdoc-syntax">(
                    </span><span class="jsdoc-var">Roo.apply</span><span class="jsdoc-syntax">({ 
                        </span><span class="jsdoc-var">handler</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">a</span><span class="jsdoc-syntax">,</span><span class="jsdoc-var">b</span><span class="jsdoc-syntax">) {
                            </span><span class="jsdoc-var">editor.insertAtCursor</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">this.ihtml</span><span class="jsdoc-syntax">);
                        }
                    }, </span><span class="jsdoc-var">this.specialElements</span><span class="jsdoc-syntax">[</span><span class="jsdoc-var">i</span><span class="jsdoc-syntax">])
                );
                    
            }
            
            </span><span class="jsdoc-var">tb.add</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">semenu</span><span class="jsdoc-syntax">);
            
            
        }
         
        
        </span><span class="jsdoc-keyword">if </span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">this.btns</span><span class="jsdoc-syntax">) {
            </span><span class="jsdoc-keyword">for</span><span class="jsdoc-syntax">(</span><span class="jsdoc-keyword">var </span><span class="jsdoc-var">i </span><span class="jsdoc-syntax">=0; </span><span class="jsdoc-var">i</span><span class="jsdoc-syntax">&lt; </span><span class="jsdoc-var">this.btns.length</span><span class="jsdoc-syntax">;</span><span class="jsdoc-var">i</span><span class="jsdoc-syntax">++) {
                </span><span class="jsdoc-keyword">var </span><span class="jsdoc-var">b </span><span class="jsdoc-syntax">= </span><span class="jsdoc-var">Roo.factory</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">this.btns</span><span class="jsdoc-syntax">[</span><span class="jsdoc-var">i</span><span class="jsdoc-syntax">],</span><span class="jsdoc-var">Roo.form</span><span class="jsdoc-syntax">);
                </span><span class="jsdoc-var">b.cls </span><span class="jsdoc-syntax">=  </span><span class="jsdoc-string">'x-edit-none'</span><span class="jsdoc-syntax">;
                </span><span class="jsdoc-var">b.scope </span><span class="jsdoc-syntax">= </span><span class="jsdoc-var">editor</span><span class="jsdoc-syntax">;
                </span><span class="jsdoc-var">tb.add</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">b</span><span class="jsdoc-syntax">);
            }
        
        }
        
        
        
        </span><span class="jsdoc-comment">// disable everything...
        
        </span><span class="jsdoc-var">this.tb.items.each</span><span class="jsdoc-syntax">(</span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">item</span><span class="jsdoc-syntax">){
           </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">item.id </span><span class="jsdoc-syntax">!= </span><span class="jsdoc-var">editor.frameId</span><span class="jsdoc-syntax">+ </span><span class="jsdoc-string">'-sourceedit'</span><span class="jsdoc-syntax">){
                </span><span class="jsdoc-var">item.disable</span><span class="jsdoc-syntax">();
            }
        });
        </span><span class="jsdoc-var">this.rendered </span><span class="jsdoc-syntax">= </span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">;
        
        </span><span class="jsdoc-comment">// the all the btns;
        </span><span class="jsdoc-var">editor.on</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'editorevent'</span><span class="jsdoc-syntax">, </span><span class="jsdoc-var">this.updateToolbar</span><span class="jsdoc-syntax">, </span><span class="jsdoc-var">this</span><span class="jsdoc-syntax">);
        </span><span class="jsdoc-comment">// other toolbars need to implement this..
        //editor.on('editmodechange', this.updateToolbar, this);
    </span><span class="jsdoc-syntax">},
    
    
    
    </span><span class="jsdoc-comment">/**
     * Protected method that will not generally be called directly. It triggers
     * a toolbar update by reading the markup state of the current selection in the editor.
     */
    </span><span class="jsdoc-var">updateToolbar</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">(){

        </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(!</span><span class="jsdoc-var">this.editor.activated</span><span class="jsdoc-syntax">){
            </span><span class="jsdoc-var">this.editor.onFirstFocus</span><span class="jsdoc-syntax">();
            </span><span class="jsdoc-keyword">return</span><span class="jsdoc-syntax">;
        }

        </span><span class="jsdoc-keyword">var </span><span class="jsdoc-var">btns </span><span class="jsdoc-syntax">= </span><span class="jsdoc-var">this.tb.items.map</span><span class="jsdoc-syntax">, 
            </span><span class="jsdoc-var">doc </span><span class="jsdoc-syntax">= </span><span class="jsdoc-var">this.editor.doc</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">frameId </span><span class="jsdoc-syntax">= </span><span class="jsdoc-var">this.editor.frameId</span><span class="jsdoc-syntax">;

        </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(!</span><span class="jsdoc-var">this.disable.font </span><span class="jsdoc-syntax">&amp;&amp; !</span><span class="jsdoc-var">Roo.isSafari</span><span class="jsdoc-syntax">){
            </span><span class="jsdoc-comment">/*
            var name = (doc.queryCommandValue('FontName')||this.editor.defaultFont).toLowerCase();
            if(name != this.fontSelect.dom.value){
                this.fontSelect.dom.value = name;
            }
            */
        </span><span class="jsdoc-syntax">}
        </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(!</span><span class="jsdoc-var">this.disable.format</span><span class="jsdoc-syntax">){
            </span><span class="jsdoc-var">btns</span><span class="jsdoc-syntax">[</span><span class="jsdoc-var">frameId </span><span class="jsdoc-syntax">+ </span><span class="jsdoc-string">'-bold'</span><span class="jsdoc-syntax">]</span><span class="jsdoc-var">.toggle</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">doc.queryCommandState</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'bold'</span><span class="jsdoc-syntax">));
            </span><span class="jsdoc-var">btns</span><span class="jsdoc-syntax">[</span><span class="jsdoc-var">frameId </span><span class="jsdoc-syntax">+ </span><span class="jsdoc-string">'-italic'</span><span class="jsdoc-syntax">]</span><span class="jsdoc-var">.toggle</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">doc.queryCommandState</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'italic'</span><span class="jsdoc-syntax">));
            </span><span class="jsdoc-var">btns</span><span class="jsdoc-syntax">[</span><span class="jsdoc-var">frameId </span><span class="jsdoc-syntax">+ </span><span class="jsdoc-string">'-underline'</span><span class="jsdoc-syntax">]</span><span class="jsdoc-var">.toggle</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">doc.queryCommandState</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'underline'</span><span class="jsdoc-syntax">));
        }
        </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(!</span><span class="jsdoc-var">this.disable.alignments</span><span class="jsdoc-syntax">){
            </span><span class="jsdoc-var">btns</span><span class="jsdoc-syntax">[</span><span class="jsdoc-var">frameId </span><span class="jsdoc-syntax">+ </span><span class="jsdoc-string">'-justifyleft'</span><span class="jsdoc-syntax">]</span><span class="jsdoc-var">.toggle</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">doc.queryCommandState</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'justifyleft'</span><span class="jsdoc-syntax">));
            </span><span class="jsdoc-var">btns</span><span class="jsdoc-syntax">[</span><span class="jsdoc-var">frameId </span><span class="jsdoc-syntax">+ </span><span class="jsdoc-string">'-justifycenter'</span><span class="jsdoc-syntax">]</span><span class="jsdoc-var">.toggle</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">doc.queryCommandState</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'justifycenter'</span><span class="jsdoc-syntax">));
            </span><span class="jsdoc-var">btns</span><span class="jsdoc-syntax">[</span><span class="jsdoc-var">frameId </span><span class="jsdoc-syntax">+ </span><span class="jsdoc-string">'-justifyright'</span><span class="jsdoc-syntax">]</span><span class="jsdoc-var">.toggle</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">doc.queryCommandState</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'justifyright'</span><span class="jsdoc-syntax">));
        }
        </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(!</span><span class="jsdoc-var">Roo.isSafari </span><span class="jsdoc-syntax">&amp;&amp; !</span><span class="jsdoc-var">this.disable.lists</span><span class="jsdoc-syntax">){
            </span><span class="jsdoc-var">btns</span><span class="jsdoc-syntax">[</span><span class="jsdoc-var">frameId </span><span class="jsdoc-syntax">+ </span><span class="jsdoc-string">'-insertorderedlist'</span><span class="jsdoc-syntax">]</span><span class="jsdoc-var">.toggle</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">doc.queryCommandState</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'insertorderedlist'</span><span class="jsdoc-syntax">));
            </span><span class="jsdoc-var">btns</span><span class="jsdoc-syntax">[</span><span class="jsdoc-var">frameId </span><span class="jsdoc-syntax">+ </span><span class="jsdoc-string">'-insertunorderedlist'</span><span class="jsdoc-syntax">]</span><span class="jsdoc-var">.toggle</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">doc.queryCommandState</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'insertunorderedlist'</span><span class="jsdoc-syntax">));
        }
        
        </span><span class="jsdoc-keyword">var </span><span class="jsdoc-var">ans </span><span class="jsdoc-syntax">= </span><span class="jsdoc-var">this.editor.getAllAncestors</span><span class="jsdoc-syntax">();
        </span><span class="jsdoc-keyword">if </span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">this.formatCombo</span><span class="jsdoc-syntax">) {
            
            
            </span><span class="jsdoc-keyword">var </span><span class="jsdoc-var">store </span><span class="jsdoc-syntax">= </span><span class="jsdoc-var">this.formatCombo.store</span><span class="jsdoc-syntax">;
            </span><span class="jsdoc-var">this.formatCombo.setValue</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">&quot;&quot;</span><span class="jsdoc-syntax">);
            </span><span class="jsdoc-keyword">for </span><span class="jsdoc-syntax">(</span><span class="jsdoc-keyword">var </span><span class="jsdoc-var">i </span><span class="jsdoc-syntax">=0; </span><span class="jsdoc-var">i </span><span class="jsdoc-syntax">&lt; </span><span class="jsdoc-var">ans.length</span><span class="jsdoc-syntax">;</span><span class="jsdoc-var">i</span><span class="jsdoc-syntax">++) {
                </span><span class="jsdoc-keyword">if </span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">ans</span><span class="jsdoc-syntax">[</span><span class="jsdoc-var">i</span><span class="jsdoc-syntax">] &amp;&amp; </span><span class="jsdoc-var">store.query</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">'tag'</span><span class="jsdoc-syntax">,</span><span class="jsdoc-var">ans</span><span class="jsdoc-syntax">[</span><span class="jsdoc-var">i</span><span class="jsdoc-syntax">]</span><span class="jsdoc-var">.tagName.toLowerCase</span><span class="jsdoc-syntax">(), </span><span class="jsdoc-keyword">false</span><span class="jsdoc-syntax">)</span><span class="jsdoc-var">.length</span><span class="jsdoc-syntax">) {
                    </span><span class="jsdoc-comment">// select it..
                    </span><span class="jsdoc-var">this.formatCombo.setValue</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">ans</span><span class="jsdoc-syntax">[</span><span class="jsdoc-var">i</span><span class="jsdoc-syntax">]</span><span class="jsdoc-var">.tagName.toLowerCase</span><span class="jsdoc-syntax">());
                    </span><span class="jsdoc-keyword">break</span><span class="jsdoc-syntax">;
                }
            }
        }
        
        
        
        </span><span class="jsdoc-comment">// hides menus... - so this cant be on a menu...
        </span><span class="jsdoc-var">Roo.menu.MenuMgr.hideAll</span><span class="jsdoc-syntax">();

        </span><span class="jsdoc-comment">//this.editorsyncValue();
    </span><span class="jsdoc-syntax">},
   
    
    </span><span class="jsdoc-var">createFontOptions </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">(){
        </span><span class="jsdoc-keyword">var </span><span class="jsdoc-var">buf </span><span class="jsdoc-syntax">= [], </span><span class="jsdoc-var">fs </span><span class="jsdoc-syntax">= </span><span class="jsdoc-var">this.fontFamilies</span><span class="jsdoc-syntax">, </span><span class="jsdoc-var">ff</span><span class="jsdoc-syntax">, </span><span class="jsdoc-var">lc</span><span class="jsdoc-syntax">;
        </span><span class="jsdoc-keyword">for</span><span class="jsdoc-syntax">(</span><span class="jsdoc-keyword">var </span><span class="jsdoc-var">i </span><span class="jsdoc-syntax">= 0, </span><span class="jsdoc-var">len </span><span class="jsdoc-syntax">= </span><span class="jsdoc-var">fs.length</span><span class="jsdoc-syntax">; </span><span class="jsdoc-var">i</span><span class="jsdoc-syntax">&lt; </span><span class="jsdoc-var">len</span><span class="jsdoc-syntax">; </span><span class="jsdoc-var">i</span><span class="jsdoc-syntax">++){
            </span><span class="jsdoc-var">ff </span><span class="jsdoc-syntax">= </span><span class="jsdoc-var">fs</span><span class="jsdoc-syntax">[</span><span class="jsdoc-var">i</span><span class="jsdoc-syntax">];
            </span><span class="jsdoc-var">lc </span><span class="jsdoc-syntax">= </span><span class="jsdoc-var">ff.toLowerCase</span><span class="jsdoc-syntax">();
            </span><span class="jsdoc-var">buf.push</span><span class="jsdoc-syntax">(
                </span><span class="jsdoc-string">'&lt;option value=&quot;'</span><span class="jsdoc-syntax">,</span><span class="jsdoc-var">lc</span><span class="jsdoc-syntax">,</span><span class="jsdoc-string">'&quot; style=&quot;font-family:'</span><span class="jsdoc-syntax">,</span><span class="jsdoc-var">ff</span><span class="jsdoc-syntax">,</span><span class="jsdoc-string">';&quot;'</span><span class="jsdoc-syntax">,
                    (</span><span class="jsdoc-var">this.defaultFont </span><span class="jsdoc-syntax">== </span><span class="jsdoc-var">lc </span><span class="jsdoc-syntax">? </span><span class="jsdoc-string">' selected=&quot;true&quot;&gt;' </span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'&gt;'</span><span class="jsdoc-syntax">),
                    </span><span class="jsdoc-var">ff</span><span class="jsdoc-syntax">,
                </span><span class="jsdoc-string">'&lt;/option&gt;'
            </span><span class="jsdoc-syntax">);
        }
        </span><span class="jsdoc-keyword">return </span><span class="jsdoc-var">buf.join</span><span class="jsdoc-syntax">(</span><span class="jsdoc-string">''</span><span class="jsdoc-syntax">);
    },
    
    </span><span class="jsdoc-var">toggleSourceEdit </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">sourceEditMode</span><span class="jsdoc-syntax">){
        </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">sourceEditMode </span><span class="jsdoc-syntax">=== </span><span class="jsdoc-var">undefined</span><span class="jsdoc-syntax">){
            </span><span class="jsdoc-var">sourceEditMode </span><span class="jsdoc-syntax">= !</span><span class="jsdoc-var">this.sourceEditMode</span><span class="jsdoc-syntax">;
        }
        </span><span class="jsdoc-var">this.sourceEditMode </span><span class="jsdoc-syntax">= </span><span class="jsdoc-var">sourceEditMode </span><span class="jsdoc-syntax">=== </span><span class="jsdoc-keyword">true</span><span class="jsdoc-syntax">;
        </span><span class="jsdoc-keyword">var </span><span class="jsdoc-var">btn </span><span class="jsdoc-syntax">= </span><span class="jsdoc-var">this.tb.items.get</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">this.editor.frameId </span><span class="jsdoc-syntax">+</span><span class="jsdoc-string">'-sourceedit'</span><span class="jsdoc-syntax">);
        </span><span class="jsdoc-comment">// just toggle the button?
        </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">btn.pressed </span><span class="jsdoc-syntax">!== </span><span class="jsdoc-var">this.editor.sourceEditMode</span><span class="jsdoc-syntax">){
            </span><span class="jsdoc-var">btn.toggle</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">this.editor.sourceEditMode</span><span class="jsdoc-syntax">);
            </span><span class="jsdoc-keyword">return</span><span class="jsdoc-syntax">;
        }
        
        </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">this.sourceEditMode</span><span class="jsdoc-syntax">){
            </span><span class="jsdoc-var">this.tb.items.each</span><span class="jsdoc-syntax">(</span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">item</span><span class="jsdoc-syntax">){
                </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">item.cmd </span><span class="jsdoc-syntax">!= </span><span class="jsdoc-string">'sourceedit'</span><span class="jsdoc-syntax">){
                    </span><span class="jsdoc-var">item.disable</span><span class="jsdoc-syntax">();
                }
            });
          
        }</span><span class="jsdoc-keyword">else</span><span class="jsdoc-syntax">{
            </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">this.initialized</span><span class="jsdoc-syntax">){
                </span><span class="jsdoc-var">this.tb.items.each</span><span class="jsdoc-syntax">(</span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">item</span><span class="jsdoc-syntax">){
                    </span><span class="jsdoc-var">item.enable</span><span class="jsdoc-syntax">();
                });
            }
            
        }
        </span><span class="jsdoc-comment">// tell the editor that it's been pressed..
        </span><span class="jsdoc-var">this.editor.toggleSourceEdit</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">sourceEditMode</span><span class="jsdoc-syntax">);
       
    },
     </span><span class="jsdoc-comment">/**
     * Object collection of toolbar tooltips for the buttons in the editor. The key
     * is the command id associated with that button and the value is a valid QuickTips object.
     * For example:
&lt;pre&gt;&lt;code&gt;
{
    bold : {
        title: 'Bold (Ctrl+B)',
        text: 'Make the selected text bold.',
        cls: 'x-html-editor-tip'
    },
    italic : {
        title: 'Italic (Ctrl+I)',
        text: 'Make the selected text italic.',
        cls: 'x-html-editor-tip'
    },
    ...
&lt;/code&gt;&lt;/pre&gt;
    * @type Object
     */
    </span><span class="jsdoc-var">buttonTips </span><span class="jsdoc-syntax">: {
        </span><span class="jsdoc-var">bold </span><span class="jsdoc-syntax">: {
            </span><span class="jsdoc-var">title</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Bold (Ctrl+B)'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">text</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Make the selected text bold.'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">cls</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'x-html-editor-tip'
        </span><span class="jsdoc-syntax">},
        </span><span class="jsdoc-var">italic </span><span class="jsdoc-syntax">: {
            </span><span class="jsdoc-var">title</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Italic (Ctrl+I)'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">text</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Make the selected text italic.'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">cls</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'x-html-editor-tip'
        </span><span class="jsdoc-syntax">},
        </span><span class="jsdoc-var">underline </span><span class="jsdoc-syntax">: {
            </span><span class="jsdoc-var">title</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Underline (Ctrl+U)'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">text</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Underline the selected text.'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">cls</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'x-html-editor-tip'
        </span><span class="jsdoc-syntax">},
        </span><span class="jsdoc-var">increasefontsize </span><span class="jsdoc-syntax">: {
            </span><span class="jsdoc-var">title</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Grow Text'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">text</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Increase the font size.'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">cls</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'x-html-editor-tip'
        </span><span class="jsdoc-syntax">},
        </span><span class="jsdoc-var">decreasefontsize </span><span class="jsdoc-syntax">: {
            </span><span class="jsdoc-var">title</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Shrink Text'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">text</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Decrease the font size.'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">cls</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'x-html-editor-tip'
        </span><span class="jsdoc-syntax">},
        </span><span class="jsdoc-var">backcolor </span><span class="jsdoc-syntax">: {
            </span><span class="jsdoc-var">title</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Text Highlight Color'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">text</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Change the background color of the selected text.'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">cls</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'x-html-editor-tip'
        </span><span class="jsdoc-syntax">},
        </span><span class="jsdoc-var">forecolor </span><span class="jsdoc-syntax">: {
            </span><span class="jsdoc-var">title</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Font Color'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">text</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Change the color of the selected text.'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">cls</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'x-html-editor-tip'
        </span><span class="jsdoc-syntax">},
        </span><span class="jsdoc-var">justifyleft </span><span class="jsdoc-syntax">: {
            </span><span class="jsdoc-var">title</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Align Text Left'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">text</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Align text to the left.'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">cls</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'x-html-editor-tip'
        </span><span class="jsdoc-syntax">},
        </span><span class="jsdoc-var">justifycenter </span><span class="jsdoc-syntax">: {
            </span><span class="jsdoc-var">title</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Center Text'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">text</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Center text in the editor.'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">cls</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'x-html-editor-tip'
        </span><span class="jsdoc-syntax">},
        </span><span class="jsdoc-var">justifyright </span><span class="jsdoc-syntax">: {
            </span><span class="jsdoc-var">title</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Align Text Right'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">text</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Align text to the right.'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">cls</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'x-html-editor-tip'
        </span><span class="jsdoc-syntax">},
        </span><span class="jsdoc-var">insertunorderedlist </span><span class="jsdoc-syntax">: {
            </span><span class="jsdoc-var">title</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Bullet List'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">text</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Start a bulleted list.'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">cls</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'x-html-editor-tip'
        </span><span class="jsdoc-syntax">},
        </span><span class="jsdoc-var">insertorderedlist </span><span class="jsdoc-syntax">: {
            </span><span class="jsdoc-var">title</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Numbered List'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">text</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Start a numbered list.'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">cls</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'x-html-editor-tip'
        </span><span class="jsdoc-syntax">},
        </span><span class="jsdoc-var">createlink </span><span class="jsdoc-syntax">: {
            </span><span class="jsdoc-var">title</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Hyperlink'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">text</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Make the selected text a hyperlink.'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">cls</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'x-html-editor-tip'
        </span><span class="jsdoc-syntax">},
        </span><span class="jsdoc-var">sourceedit </span><span class="jsdoc-syntax">: {
            </span><span class="jsdoc-var">title</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Source Edit'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">text</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'Switch to source editing mode.'</span><span class="jsdoc-syntax">,
            </span><span class="jsdoc-var">cls</span><span class="jsdoc-syntax">: </span><span class="jsdoc-string">'x-html-editor-tip'
        </span><span class="jsdoc-syntax">}
    },
    </span><span class="jsdoc-comment">// private
    </span><span class="jsdoc-var">onDestroy </span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">(){
        </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">this.rendered</span><span class="jsdoc-syntax">){
            
            </span><span class="jsdoc-var">this.tb.items.each</span><span class="jsdoc-syntax">(</span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">item</span><span class="jsdoc-syntax">){
                </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">item.menu</span><span class="jsdoc-syntax">){
                    </span><span class="jsdoc-var">item.menu.removeAll</span><span class="jsdoc-syntax">();
                    </span><span class="jsdoc-keyword">if</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">item.menu.el</span><span class="jsdoc-syntax">){
                        </span><span class="jsdoc-var">item.menu.el.destroy</span><span class="jsdoc-syntax">();
                    }
                }
                </span><span class="jsdoc-var">item.destroy</span><span class="jsdoc-syntax">();
            });
             
        }
    },
    </span><span class="jsdoc-var">onFirstFocus</span><span class="jsdoc-syntax">: </span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">() {
        </span><span class="jsdoc-var">this.tb.items.each</span><span class="jsdoc-syntax">(</span><span class="jsdoc-keyword">function</span><span class="jsdoc-syntax">(</span><span class="jsdoc-var">item</span><span class="jsdoc-syntax">){
           </span><span class="jsdoc-var">item.enable</span><span class="jsdoc-syntax">();
        });
    }
});




</span></code></body></html>